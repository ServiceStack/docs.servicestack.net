<!doctype html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7722718-13"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'UA-7722718-13');</script>
    
    <meta charset="utf-8"/>
    <meta name='date' content='2024-02-20T09:51:13.6637923Z'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="/img/logo.svg">
    <title>AutoQuery AutoGen CRUD Services</title>
    <script>
    if (location.search === "?dark") localStorage.setItem('color-scheme','dark') 
    if (location.search === "?light") localStorage.removeItem('color-scheme') 
    const cls = document.querySelector('html').classList
    if (localStorage.getItem('color-scheme') === 'dark')
        cls.add('dark')
    else
        cls.remove('dark')
    </script>
    <link rel="stylesheet" href="/css/app.css">
    

    <script async src="https://ga.jspm.io/npm:es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
{
    "imports": {
        "app.mjs": "/mjs/app.mjs",
        "vue": "/lib/mjs/vue.min.mjs",
        "@servicestack/client": "/lib/mjs/servicestack-client.min.mjs",
        "@servicestack/vue": "/lib/mjs/servicestack-vue.min.mjs"
    }
}
</script>
</head>
<body class="bg-white dark:bg-black dark:text-white">

<header id="header" class="top-0 fixed z-50 h-14 bg-white dark:bg-black opacity-90 w-full shadow">
  <nav class="border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-black">
    <div class="mx-auto max-w-[100rem] pr-4 sm:pr-6 lg:pr-8">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="flex flex-shrink-0 items-center">
            <a class="mr-2 lg:mr-8 flex items-center" href="/">
                <svg class="w-8 h-8 sm:ml-2 sm:w-12 sm:h-12" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M10 6c1.544 1.76 2.276 4.15 2.217 6.61c3.968 1.67 9.924 6.12 11.181 12.39H28C26.051 14.31 14.918 6.77 10 6zm-2 7c4.67 4.913.81 11.582-4 12h18.97C21.5 18.289 11.95 13.533 8 13z"/></svg>
                <span class="hidden sm:block text-2xl font-semibold">Documentation</span>
            </a>
          </div>
            <div class="hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-4 lg:space-x-8">
                <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
                        <a href="/templates/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            <span class="hidden xl:inline mr-1">Project</span> Templates
                        </a>
                        <a href="/vue/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Vue
                        </a>
                        <a href="/autoquery/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-indigo-500 text-gray-900">
                            AutoQuery
                        </a>
                        <a href="/auth/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Auth
                        </a>
                        <a href="/ormlite/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            OrmLite
                        </a>
                        <a href="/redis/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Redis
                        </a>
                        <a href="/locode/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            Locode
                        </a>
                        <a href="/grpc/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            gRPC
                        </a>
            </div>
        </div>
        <div class="hidden sm:ml-6 sm:flex sm:items-center">
            <typesense></typesense>
            <dark-mode-toggle class="ml-2 w-10"></dark-mode-toggle>
        </div>
        <div class="-mr-2 flex items-center sm:hidden">
          <!-- Mobile menu button -->
          <button type="button" v-on:click="open=!open" class="inline-flex items-center justify-center rounded-md bg-white dark:bg-black p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:ring-offset-black" aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <!-- Menu open: "hidden", Menu closed: "block" -->
            <svg :class="['h-6 w-6', open ? 'hidden' : 'block']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
            <!-- Menu open: "block", Menu closed: "hidden" -->
            <svg :class="['h-6 w-6', open ? 'block' : 'hidden']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div v-cloak v-if="open" class="sm:hidden">
        <div class="space-y-1 pb-3 pt-2">
            <!-- Current: "border-indigo-500 bg-indigo-50 text-indigo-700", Default: "border-transparent text-gray-600 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-800" -->
                    <a href="/templates/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Project Templates
                    </a>
                    <a href="/vue/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Vue
                    </a>
                    <a href="/autoquery/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-indigo-500 bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200">
                        AutoQuery
                    </a>
                    <a href="/auth/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Auth
                    </a>
                    <a href="/ormlite/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        OrmLite
                    </a>
                    <a href="/redis/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Redis
                    </a>
                    <a href="/locode/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Locode
                    </a>
                    <a href="/grpc/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        gRPC
                    </a>
        </div>
    </div>
  </nav>
</header>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"

const Header = {
    setup() {
        const open = ref(false)
        return { open }
    }
}
mount('#header', Header)
</script>


<div class="min-h-screen">
    <main role="main" class="pt-16 pb-3 max-w-[100rem] mx-auto">
        



<style>
.active {
    color: #0ea5e9 !important;
}
</style>
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/typography.css">
<link rel="stylesheet" href="/css/lite-yt-embed.css">

<div class="w-full max-w-[100rem] mx-auto">
    <div class="flex flex-wrap">
        <div id="sidebar" class="z-40 inset-0 flex-none bg-white dark:bg-black lg:w-64 xl:w-80">
            <button v-cloak v-on:click="open=true" :class="['text-gray-400 hover:text-gray-500 pt-4 pl-2 absolute transform transition-all duration-200', open ? 'opacity-0 translate-x-56' : 'opacity-100']" title="Open Sidebar">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H10m10 0l-4 4m4-4l-4-4M4 4v16"/></svg>
            </button>
            <div :class="['fixed bg-white dark:bg-black h-screen overflow-y-auto scrolling-touch overflow-hidden shadow lg:shadow-none transform transition-transform duration-200', open ? '' : 'translate-x-[-100%]']">
                <nav class="sidebar lg:w-64 xl:w-80 px-1 pt-6 pb-16 overflow-y-auto font-medium text-sm lg:text-base sm:px-3 xl:px-5" aria-label="Sidebar">
                    <close-button title="Close Sidebar" class="lg:hidden -mr-2" v-on:close="open=false"></close-button>
                                <a href="/autoquery/" class="block flex items-center whitespace-nowrap">
<svg class='h-6 w-6 shrink-0 text-sky-500' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' aria-hidden='true'><path stroke-linecap='round' stroke-linejoin='round' d='M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25'></path></svg>                                    <span class="p-2 pl-3 font-display font-medium text-slate-900 dark:text-white">
AutoQuery                                    </span>
                                </a>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/autoquery/rdbms" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery RDBMS
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/data" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery Data
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/memory" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery Data Memory
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/service" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery Data Service
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/dynamodb" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery Data DynamoDB
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/crud" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery CRUD
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/audit-log" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery Audit Log
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/autogen" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full active font-semibold text-sky-500 before:bg-sky-500">
                                        AutoGen
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/bookings-crud" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AutoQuery CRUD Bookings Demo
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/autoquery/why-not-odata" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Why Not OData
                                    </a>
                                </li>
                        </ul>
                </nav>
            </div>
        </div>
        <div id="doc" class="mx-auto flex">
            <div class="mt-8 mx-auto prose lg:prose-lg">
                
                    <section class="not-prose mb-16 md:mb-12">
                        <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 dark:text-gray-50 sm:text-5xl md:text-6xl">
                            AutoQuery AutoGen CRUD Services
                        </h1>
                    </section>

                <div class="not-prose"></div>

                <div class="content"><p>Long time users of ServiceStack will know it's a staunch proponent of <strong>code-first development</strong> where your C# Types retains the master authority of your App's logic, although there are a number of times where you have to work with existing databases which would require significant effort to create the initial code-first Data Models. Historically we've pointed people to use <a href="/ormlite/autogen-t4#t4-template-support">OrmLite's T4 Template Support</a> which provides a decent initial stab, however it's limited in its capability and offers a sub par development experience.</p>
<p><lite-youtube class="w-full mx-4 my-4" width="560" height="315" videoid="NaJ7TW-Q_pU" style="background-image: url('https://img.youtube.com/vi/NaJ7TW-Q_pU/maxresdefault.jpg')"></lite-youtube></p>
<h3 id="code-generation-of-autoquery-crud-services">Code Generation of AutoQuery &amp; CRUD Services<a class="header-anchor" href="javascript:;" onclick="location.hash='#code-generation-of-autoquery-crud-services'" aria-label="Permalink"> </a></h3>
<p>Now with AutoCrud we can add a lot more value in this area as AutoCrud's declarative nature allows us to easily generate AutoQuery &amp; Crud Services by just emitting declarative Request DTOs.</p>
<p>You can then add the generated DTOs to your ServiceModel's to quickly enable AutoQuery Services for your existing databases.</p>
<img src="/img/pages/svg/servicify.svg" width="100%">
<p>To enable this feature you you just need to initialize <code>GenerateCrudServices</code> in your <code>AutoQueryFeature</code> plugin, e.g:</p>
<pre><code class="language-csharp">Plugins.Add(new AutoQueryFeature {
    MaxLimit = 1000,
    GenerateCrudServices = new GenerateCrudServices {}
});
</code></pre>
<p>If you don't have an existing database, you can quickly test this out with a Northwind SQLite database available from <a href="https://github.com/NetCoreApps/NorthwindAuto">https://github.com/NetCoreApps/NorthwindAuto</a>:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x download NetCoreApps/NorthwindAuto</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>As you'll need to use 2 terminal windows, I'd recommend opening the project with <strong>VS Code</strong> which has great multi-terminal support:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>code NorthwindAuto</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>The important parts of this project is the registering the OrmLite DB Connection, the above configuration and the local <strong>northwind.sqlite</strong> database, i.e:</p>
<pre><code class="language-csharp">container.AddSingleton&lt;IDbConnectionFactory&gt;(c =&gt;
    new OrmLiteConnectionFactory(MapProjectPath(&quot;~/northwind.sqlite&quot;), SqliteDialect.Provider));

Plugins.Add(new AutoQueryFeature {
    MaxLimit = 1000,
    GenerateCrudServices = new GenerateCrudServices {}
});
</code></pre>
<h2 id="export-code-first-dtos">Export Code-First DTOs<a class="header-anchor" href="javascript:;" onclick="location.hash='#export-code-first-dtos'" aria-label="Permalink"> </a></h2>
<p>After restarting your App with AutoGen's <code>GenerateCrudServices</code> enabled you can export the auto-generated APIs and Data Models into code-first C# classes</p>
<p><lite-youtube class="w-full mx-4 my-4" width="560" height="315" videoid="mFyMgg7c3vg" style="background-image: url('https://img.youtube.com/vi/mFyMgg7c3vg/maxresdefault.jpg')"></lite-youtube></p>
<h3 id="generating-autoquery-apis-and-data-models">Generating AutoQuery APIs and Data Models<a class="header-anchor" href="javascript:;" onclick="location.hash='#generating-autoquery-apis-and-data-models'" aria-label="Permalink"> </a></h3>
<p>The development experience is essentially the same as <a href="/add-servicestack-reference">Add ServiceStack Reference</a> where you'll need to run the .NET Core App in 1 terminal:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>dotnet run</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Then use the <code>x</code> dotnet tool to download all the AutoQuery &amp; Crud Services for all tables in the configured DB connection:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p><code>x csharp https://localhost:5001 -path /crud/all/csharp</code></p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>If you're running a mix of autogenerated AutoGen AutoQuery APIs with existing typed AutoQuery APIs, you can just
generate the <strong>new</strong> Services with:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x csharp https://localhost:5001 -path /crud/new/csharp</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Which you can then copy into your ServiceModel project.</p>
<div class="tip custom-block">
                <p class="custom-block-title">TIP</p><p>If no schema is provided, a default schema is used which depends on the Dialect Provider, eg SQL Server, PostgreSQL etc.
Multiple schema support requires the AutoQueryFeature to be configured with <a href="#multiple-schemas-and-rdbms-connections">multiple schemas</a>.</p>
</div>
<h3 id="updating-generated-services">Updating Generated Services<a class="header-anchor" href="javascript:;" onclick="location.hash='#updating-generated-services'" aria-label="Permalink"> </a></h3>
<p>If your RDBMS schema changes you'd need to restart your .NET App, then you can update all existing <code>dtos.cs</code> with:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x csharp</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>i.e. the same experience as updating normal DTOs.</p>
<h3 id="switch-to-code-first-dev-model">Switch to code-first dev model<a class="header-anchor" href="javascript:;" onclick="location.hash='#switch-to-code-first-dev-model'" aria-label="Permalink"> </a></h3>
<p>After generating <code>dtos.cs</code> AutoGen is no longer needed and can now be removed by removing <code>GenerateCrudServices</code></p>
<pre><code class="language-csharp">Plugins.Add(new AutoQueryFeature {
    MaxLimit = 1000,
    // GenerateCrudServices = new GenerateCrudServices {}
});
</code></pre>
<p>All functionality and features can now be added to annotating &amp; enhancing your code-first C# Typed DTOs.</p>
<h3 id="autogen-specific-options-in-autogen-dtos">AutoGen specific options in AutoGen DTOs<a class="header-anchor" href="javascript:;" onclick="location.hash='#autogen-specific-options-in-autogen-dtos'" aria-label="Permalink"> </a></h3>
<p>When using AutoGen to generate Typed AutoQuery DTOs for your RDBMS Tables:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p><code>x csharp https://localhost:5001 -path /crud/all/csharp</code></p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>The generated <code>dtos.cs</code> includes AutoGen-specific options that can be used to maintain multiple custom RDBMS Tables and AutoQuery APIs, e.g. you could maintain one for each of your different RDBMS schemas:</p>
<pre><code class="language-csharp">/* Options:
//...
//IncludeCrudOperations: 
Schema: custom
//NamedConnection: 
//NoCache: 
//IncludeTables: 
//ExcludeTables: 
//AuthSecret: 
*/
</code></pre>
<h3 id="autogen-code-generation-customizations">AutoGen Code Generation Customizations<a class="header-anchor" href="javascript:;" onclick="location.hash='#autogen-code-generation-customizations'" aria-label="Permalink"> </a></h3>
<p>AutoGen also supports a number of options to customize its generated code:</p>
<ul>
<li><strong>IncludeCrudOperations</strong> <code>string[]</code> - Which AutoCrud APIs to include: <code>Query</code>, <code>Create</code>, <code>Update</code>, <code>Patch</code>, <code>Delete</code></li>
<li><strong>Schema</strong> <code>string</code> - The RDBMS Schema you want AutoQuery Services generated for</li>
<li><strong>NamedConnection</strong> <code>string</code> - The NamedConnection you want AutoQuery Services generated for</li>
<li><strong>NoCache</strong> <code>boolean</code> - Do not use cached DB Table Schemas, re-fetch latest</li>
<li><strong>IncludeTables</strong> <code>string[]</code> - Allow List to specify only the tables you would like to have code-generated</li>
<li><strong>ExcludeTables</strong> <code>string[]</code> - Block List to exclude tables from code-generation</li>
<li><strong>AuthSecret</strong> <code>string</code> - The Admin AuthSecret to access Service in Release mode</li>
</ul>
<p>For example you can use an empty array to only generate Data Models without any AutoQuery APIs:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x csharp https://localhost:5001 -path /crud/all/csharp -q IncludeCrudOperations=[]</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Only generate read-only APIs by limiting generation to Query AutoQuery Request DTOs:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x csharp https://localhost:5001 -path /crud/all/csharp -q IncludeCrudOperations=[Query]</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Only generate Read, Create and Update APIs (i.e. no Delete):</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x csharp https://localhost:5001 -path /crud/all/csharp -q IncludeCrudOperations=[Query,Create,Patch]</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>These customized generated classes are also available from your App's built-in endpoints:</p>
<div class="table table-striped">
<table>
<thead>
<tr>
<th>Type</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>All Services (C#)</td>
<td><code>https://localhost:5001/crud/all/csharp</code></td>
</tr>
<tr>
<td>Only New Services (C#)</td>
<td><code>https://localhost:5001/crud/new/csharp</code></td>
</tr>
<tr>
<td>Read Only Services (C#)</td>
<td><code>https://localhost:5001/crud/all/csharp?IncludeCrudOperations=[Query]</code></td>
</tr>
<tr>
<td>Only Data Models (C#)</td>
<td><code>https://localhost:5001/crud/all/csharp?IncludeCrudOperations=[]</code></td>
</tr>
<tr>
<td>New Auto Generated Services (C#)</td>
<td><code>https://localhost:5001/crud/new/csharp</code></td>
</tr>
<tr>
<td>Generate DTOs in alt languages (e.g. TypeScript)</td>
<td><code>https://localhost:5001/crud/all/typescript</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="autoregister-autogen-autoquery-services">AutoRegister AutoGen AutoQuery Services<a class="header-anchor" href="javascript:;" onclick="location.hash='#autoregister-autogen-autoquery-services'" aria-label="Permalink"> </a></h2>
<p>To recap we've now got an integrated scaffolding solution where we can quickly generate code-first AutoQuery Services and integrate them into our App to quickly build an AutoQuery Service layer around our existing database.</p>
<p>But we can raise the productivity level even higher by instead of manually importing the code-generated Services into our project we just tell ServiceStack to do it for us.</p>
<p>This is what the magical <code>AutoRegister</code> flag does for us:</p>
<pre><code class="language-csharp">Plugins.Add(new AutoQueryFeature {
    GenerateCrudServices = new GenerateCrudServices {
        AutoRegister = true,
        //....
    }
});
</code></pre>
<h3 id="instantly-servicify-northwind-db-with-grpc">Instantly Servicify Northwind DB with gRPC<a class="header-anchor" href="javascript:;" onclick="location.hash='#instantly-servicify-northwind-db-with-grpc'" aria-label="Permalink"> </a></h3>
<p>To show the exciting potential of this feature we'll demonstrate one valuable use-case of creating a <a href="/grpc/">grpc</a> project, mixing in AutoQuery configuration to instantly Servicifying the Northwind DB, browsing the generated Services from ServiceStack's <a href="/metadata-page">Metadata Page</a>, explore the gRPC RPC Services <code>.proto</code> then create a new Dart App to consume the gRPC Services:</p>
<blockquote>
<p>YouTube: <a href="https://youtu.be/5NNCaWMviXU">youtu.be/5NNCaWMviXU</a></p>
</blockquote>
<p><a href="https://youtu.be/5NNCaWMviXU"><img src="/img/pages/release-notes/v5.9/autogen-grpc.png" alt="" /></a></p>
<h4 id="step-by-step-guide">Step-by-step Guide<a class="header-anchor" href="javascript:;" onclick="location.hash='#step-by-step-guide'" aria-label="Permalink"> </a></h4>
<p>See the annotated guide below to follow along:</p>
<p>Create a new <a href="https://github.com/NetCoreTemplates/grpc">grpc</a> .NET Core project and open it in VS Code:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x new grpc NorthwindApi
code NorthwindApi</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Inside VS Code open a Terminal Window and <a href="/mix-tool">mix in</a> the required configuration:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>cd NorthwindApi
x mix autocrudgen sqlite northwind.sqlite</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Which will mix in the <a href="https://gist.github.com/gistlyn/464a80c15cb3af4f41db7810082dc00c">autocrudgen</a> gist to enable AutoQuery and tell it to Auto Generate AutoQuery and CRUD Services for all tables in the registered RDBMS (default schema):</p>
<pre><code class="language-csharp">public class ConfigureAutoQuery : IConfigureAppHost
{
    public void Configure(IAppHost appHost)
    {
        appHost.Plugins.Add(new AutoQueryFeature {
            MaxLimit = 1000,
            GenerateCrudServices = new GenerateCrudServices {
                AutoRegister = true
            }
        });
    }
}
</code></pre>
<p>The <a href="https://gist.github.com/gistlyn/768d7b330b8c977f43310b954ceea668">sqlite</a> gist registers an
<a href="https://github.com/ServiceStack/ServiceStack.OrmLite">OrmLite.Sqlite</a> RDBMS connection with our App which we want to configure to connect to a <strong>northwind.sqlite</strong> database:</p>
<pre><code class="language-csharp">public void Configure(IServiceCollection services)
{
    services.AddSingleton&lt;IDbConnectionFactory&gt;(new OrmLiteConnectionFactory(
        Configuration.GetConnectionString(&quot;DefaultConnection&quot;) 
            ?? &quot;northwind.sqlite&quot;,
        SqliteDialect.Provider));
}
</code></pre>
<p>Then we apply the <a href="https://gist.github.com/gistlyn/97d0bcd3ebd582e06c85f8400683e037">northwind.sqlite</a> gist to add the <strong>northwind.sqlite</strong> database to our new project.</p>
<p>Now that our App's configured we can run it with:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>dotnet run</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Where it will start the ServiceStack gRPC App on 3 ports configured in <strong>appsettings.json</strong>:</p>
<ul>
<li><code>5001</code> - Enables access from existing HTTP/1.1 clients and proxies</li>
<li><code>5002</code> - Enables a secure gRPC Channel</li>
<li><code>5003</code> - Enables an insecure gRPC Channel</li>
</ul>
<pre><code class="language-json">{
  &quot;Kestrel&quot;: {
    &quot;Endpoints&quot;: {
      &quot;Https&quot;: {
        &quot;Url&quot;: &quot;https://*:5001&quot;,
        &quot;Protocols&quot;: &quot;Http1&quot;
      },
      &quot;GrpcSecure&quot;: {
        &quot;Url&quot;: &quot;https://*:5051&quot;,
        &quot;Protocols&quot;: &quot;Http2&quot;
      },
      &quot;GrpcInsecure&quot; : {
        &quot;Url&quot;: &quot;http://*:5054&quot;,
        &quot;Protocols&quot;: &quot;Http2&quot;
      }
    }
  }
}
</code></pre>
<p>Once running you can view your Apps metadata page at <code>https://localhost:5001</code> to inspect all the Services that were generated.</p>
<h4 id="create-dart-grpc-console-app">Create Dart gRPC Console App<a class="header-anchor" href="javascript:;" onclick="location.hash='#create-dart-grpc-console-app'" aria-label="Permalink"> </a></h4>
<p>It's also now accessible via <a href="/grpc/">ServiceStack's gRPC endpoint</a> which opens your generated Services up to <a href="https://grpc.io">Google's high-performance gRPC ecosystem</a> which enables typed, high-performance integrations into exciting platforms like <a href="https://flutter.dev">Flutter</a> which uses the <a href="https://dart.dev">Dart</a> programming language to create Reactive, high-performance native Android and iOS Apps.</p>
<p>We can test Dart's gRPC integration and development workflow in a new Dart Console App we can create with:</p>
<pre><code class="language-bash">mkdir dart-grpc &amp;&amp; cd dart-grpc
pub global activate stagehand
stagehand console-full
</code></pre>
<p>We'll need to update <strong>pubspec.yaml</strong> with the required gRPC dependencies:</p>
<pre><code class="language-yaml">dependencies:
  fixnum: ^0.10.11
  async: ^2.2.0
  protobuf: ^1.0.1
  grpc: ^2.1.3    
</code></pre>
<p>When you save <strong>pubspec.yaml</strong> Dart's VS Code extension will automatically fetch any new dependencies which can also be manually run with:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>pub get</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>We can then use the <a href="/grpc#public-grpc-protoc-service-and-ui">protoc support in the dotnet tools</a> to download our <code>.proto</code> Services descriptor and generate Dart's gRPC classes with a single command:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p><code>x proto-dart https://localhost:5001 -out lib</code></p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>We're now all set to consume our gRPC Services using the protoc generated gRPC proxy in our <code>main()</code> function in <strong>main.dart</strong>:</p>
<pre><code class="language-dart">import 'dart:io';
import 'package:grpc/grpc.dart';
import 'package:dart_grpc/services.pb.dart';
import 'package:dart_grpc/services.pbgrpc.dart';

void main(List&lt;String&gt; arguments) async {
    var client = GrpcServicesClient(ClientChannel('localhost', port:5054,
      options:ChannelOptions(credentials: ChannelCredentials.insecure())));

    var response = await client.getQueryCategory(QueryCategory());
    print(response.results);
    exit(0);
}
</code></pre>
<p>Which can be run with:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>dart bin\main.dart</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<h3 id="calling-grpc-ssl-services">Calling gRPC SSL Services<a class="header-anchor" href="javascript:;" onclick="location.hash='#calling-grpc-ssl-services'" aria-label="Permalink"> </a></h3>
<p>The <a href="/grpc/dart#dart-protoc-grpc-ssl-example">Dart gRPC Docs</a> shows how we can connect to it via our gRPC SSL endpoint by running the openssl scripts in <a href="https://github.com/NetCoreTemplates/grpc/tree/master/scripts">grpc/scripts</a> to generate our <strong>dev.crt</strong> and <strong>prod.crt</strong> SSL Certificates that you can configure in your in your <strong>GrpcSecure</strong> endpoint with:</p>
<pre><code class="language-json">{
  &quot;Kestrel&quot;: {
    &quot;Endpoints&quot;: {
      &quot;GrpcSecure&quot;: {
        &quot;Url&quot;: &quot;https://*:5051&quot;,
        &quot;Protocols&quot;: &quot;Http2&quot;,
        &quot;Certificate&quot;: {
          &quot;Path&quot;: &quot;dev.pfx&quot;,
          &quot;Password&quot;: &quot;grpc&quot;
        }
      }
    }
  }
}
</code></pre>
<p>Where you'll then be able to access the secure gRPC SSL endpoints using the generated <strong>dev.crt</strong> certificate in your Dart App:</p>
<pre><code class="language-dart">import 'dart:io';
import 'package:grpc/grpc.dart';
import 'package:dart_grpc/services.pb.dart';
import 'package:dart_grpc/services.pbgrpc.dart';

GrpcServicesClient createClient({CallOptions options}) {
  return GrpcServicesClient(ClientChannel('localhost', port:5051,
    options:ChannelOptions(credentials: ChannelCredentials.secure(
        certificates: File('dev.crt').readAsBytesSync(),
        authority: 'localhost'))), options:options);
}

void main(List&lt;String&gt; args) async {

    var client = createClient();
    var response = await client.getQueryCategory(QueryCategory());
    print(response.results);

    exit(0);
}
</code></pre>
<h3 id="autogens-autoregister-implementation">AutoGen's AutoRegister Implementation<a class="header-anchor" href="javascript:;" onclick="location.hash='#autogens-autoregister-implementation'" aria-label="Permalink"> </a></h3>
<p>Whilst the <code>AutoRegister = true</code> flag on its face may seem magical, it's simply an instruction that tells ServiceStack to register the <strong>new</strong> AutoQuery Services it already knows about and register them as if they were normal code-first Services that we had written ourselves.</p>
<p>More accurately, behind-the-scenes it uses the Metadata Type structure it constructed in generating the Services &amp; Types, i.e. the same Types used to project into its Add ServiceStack Reference's generated C#, TypeScript, (and other languages) which are also the same Types that are manipulated when customizing code-generation, gets used to generate .NET Types in memory on Startup with Reflection.Emit.</p>
<p>Barring any issues with the projection into IL, externally the end result is indistinguishable to a normal code-first ServiceStack Service manually created by a developer - An important point as to why these solutions compose well with the rest of ServiceStack, just as an AutoQuery Service is a normal ServiceStack Service, these auto generated &amp; auto registered ServiceStack Services are regular Auto Query Services.</p>
<p>The primary difference is that they only exist in a .NET Assembly in memory created on Startup, not in code so they're not &quot;statically visible&quot; to a C# compiler, IDE, tools, etc. But otherwise they're regular typed ServiceStack Services and can take advantage of the ecosystem around Services including <a href="/add-servicestack-reference">Add ServiceStack Reference</a> &amp; other Metadata Pages and Services, etc.</p>
<h3 id="createcrudservices-instructions">CreateCrudServices Instructions<a class="header-anchor" href="javascript:;" onclick="location.hash='#createcrudservices-instructions'" aria-label="Permalink"> </a></h3>
<p>Peeking deeper behind the <code>AutoRegister</code> flag will reveal that it's a helper for adding an empty <code>CreateCrudServices</code> instance, i.e. it's equivalent to:</p>
<pre><code class="language-csharp">Plugins.Add(new AutoQueryFeature {
    GenerateCrudServices = new GenerateCrudServices {
        CreateServices = {
            new CreateCrudServices()
        }
        //....
    }
});
</code></pre>
<h4 id="multiple-schemas-and-rdbms-connections">Multiple Schemas and RDBMS Connections<a class="header-anchor" href="javascript:;" onclick="location.hash='#multiple-schemas-and-rdbms-connections'" aria-label="Permalink"> </a></h4>
<p>This instructs ServiceStack to generate Services for the default option, i.e. all tables in the Database of the default registered Database connection and default schema.</p>
<p>Although should you wish to, you can also generate Services for multiple Databases and RDBMS Schemas within the same App.</p>
<p>With this you could have a single API Gateway Servicifying access to multiple System RDBMS Tables &amp; Schemas, e.g:</p>
<pre><code class="language-csharp">Plugins.Add(new AutoQueryFeature {
    GenerateCrudServices = new GenerateCrudServices {
        CreateServices = {
            new CreateCrudServices(),
            new CreateCrudServices { Schema = &quot;AltSchema&quot; },
            new CreateCrudServices { NamedConnection = &quot;Reporting&quot; },
            new CreateCrudServices { NamedConnection = &quot;Reporting&quot;, Schema = &quot;AltSchema&quot; },
        }
        //....
    }
});
</code></pre>
<p>These will generated Service Contracts &amp; DTO Types with the Multitenancy <a href="/autoquery/rdbms#named-connection">NamedConnection</a> &amp; OrmLite <code>[Schema]</code> attribute required for routing AutoQuery Services to use the appropriate RDBMS connection of Schema.</p>
<p>Although there are potential conflicts if there are identical table names in each RDBMS/Schema as it has to go back and rewrite the Metadata References to use a non-ambiguous name, first tries using the NamedConnection, then the schema then a combination when both exists, if it's still ambiguous it gives up and ignores it. If you do run into conflicts, the recommendation is to &quot;eject&quot; the generated <code>.cs</code> sources and manually update them to use your preferred unique names.</p>
<h3 id="customize-code-generation-to-include-app-conventions">Customize Code Generation to include App Conventions<a class="header-anchor" href="javascript:;" onclick="location.hash='#customize-code-generation-to-include-app-conventions'" aria-label="Permalink"> </a></h3>
<p>Being able to instantly generate AutoQuery Services for all your RDBMS tables is nice, but it's even nicer if you could easily customize the code-generation!</p>
<p>Together with the flexibility of the new declarative validation support you can compose a surprisingly large amount of your App's logic using the versatility of C# to automate embedding your App's conventions by annotating them on declarative Request DTOs.</p>
<p>The existing code-generation already infers a lot from your RDBMS schema which you can further augment using the available <code>GenerateCrudServices</code> filters:</p>
<ul>
<li><code>ServiceFilter</code> - called with every Service Operation</li>
<li><code>TypeFilter</code> - called with every DTO Type</li>
<li><code>IncludeService</code> - a predicate to return whether the <strong>Service</strong> should be included</li>
<li><code>IncludeType</code> - a predicate to return whether the <strong>Type</strong> should be included</li>
<li><code>TableSchemasFilter</code> - an action to modify the <code>List&lt;TableSchema&gt;</code> that AutoGen uses to generate data models</li>
</ul>
<p>For an illustration of this in action, here's a typical scenario of how the Northwind AutoQuery Services could be customized:</p>
<ul>
<li>Controlling which Tables <strong>not to generate Services for</strong> in <code>ignoreTables</code></li>
<li>Which tables not to generate <strong>Write Crud Services</strong> for in <code>readOnlyTables</code></li>
<li>Which tables to <strong>restrict access</strong> to in different roles in <code>protectTableByRole</code></li>
<li>Example of <strong>additional validation</strong> to existing tables in <code>tableRequiredFields</code>
<ul>
<li>Adds the <code>[ValidateNotEmpty]</code> attribute to Services accessing the table and the <code>[Required]</code> OrmLite attribute for the Data Model DTO Type.</li>
</ul>
</li>
</ul>
<pre><code class="language-csharp">var ignoreTables = new[] { &quot;IgnoredTable&quot;, }; // don't generate AutoCrud APIs for these tables
var readOnlyTables = new[] { &quot;Region&quot; };
var protectTableByRole = new Dictionary&lt;string,string[]&gt; {
    [&quot;Admin&quot;]    = new[] { nameof(CrudEvent), nameof(ValidationRule) },
    [&quot;Accounts&quot;] = new[] { &quot;Order&quot;, &quot;Supplier&quot;, &quot;Shipper&quot; },
    [&quot;Employee&quot;] = new[] { &quot;Customer&quot;, &quot;Order&quot;, &quot;OrderDetail&quot; },
    [&quot;Manager&quot;]  = new[] { &quot;Product&quot;, &quot;Category&quot;, &quot;Employee&quot;, &quot;UserAuth&quot;, &quot;UserAuthDetails&quot; },
};
var tableRequiredFields = new Dictionary&lt;string,string[]&gt; {
    [&quot;Shipper&quot;] = new[]{ &quot;CompanyName&quot;, &quot;Phone&quot; },
};

Plugins.Add(new AutoQueryFeature {
    MaxLimit = 100,
    GenerateCrudServices = new GenerateCrudServices
    {
        ServiceFilter = (op,req) =&gt; 
        {
            // Require all Write Access to Tables to be limited to Authenticated Users
            if (op.IsCrudWrite())
            {
                op.Request.AddAttributeIfNotExists(new ValidateRequestAttribute(&quot;IsAuthenticated&quot;), 
                    x =&gt; x.Validator == &quot;IsAuthenticated&quot;);
            }

            // Limit Access to specific Tables
            foreach (var tableRole in protectTableByRole)
            {
                foreach (var table in tableRole.Value)
                {
                    if (op.ReferencesAny(table))
                        op.Request.AddAttribute(new ValidateHasRoleAttribute(tableRole.Key));
                }
            }

            // Add [ValidateNotEmpty] attribute on Services operating Tables with Required Fields
            if (op.DataModel != null &amp;&amp; tableRequiredFields.TryGetValue(op.DataModel.Name, out var required))
            {
                var props = op.Request.Properties.Where(x =&gt; required.Contains(x.Name));
                props.Each(x =&gt; x.AddAttribute(new ValidateNotEmptyAttribute()));
            }
        },
        TypeFilter = (type, req) =&gt; 
        {
            // Add OrmLite [Required] Attribute on Tables with Required Fields
            if (tableRequiredFields.TryGetValue(type.Name, out var requiredFields))
            {
                var props = type.Properties.Where(x =&gt; requiredFields.Contains(x.Name));
                props.Each(x =&gt; x.AddAttribute(new RequiredAttribute()));
            }
        },
        //Don't generate the Services or Types for Ignored Tables
        IncludeService = op =&gt; !ignoreTables.Any(table =&gt; op.ReferencesAny(table)) &amp;&amp;
            !(op.IsCrudWrite() &amp;&amp; readOnlyTables.Any(table =&gt; op.ReferencesAny(table))),

        IncludeType = type =&gt; !ignoreTables.Contains(type.Name),
    }
});

Plugins.Add(new ValidationFeature()); // Enable Validation
</code></pre>
<p>Additionally, the <code>TableSchemasFilter</code> can be used to modify the schema used by AutoGen to generate the types associated with your AutoQuery APIs.
This gives you the opportunity to filter or modify the schema after they are pulled from the database.
For example, we could <code>Remove</code> tables based on naming, or alter column definitions to assist with any schema issues.</p>
<pre><code class="language-csharp">GenerateCrudServices = new GenerateCrudServices {
    AutoRegister = true,
    AddDataContractAttributes = false,
    TableSchemasFilter = tableSchemas =&gt;
    {
        // Don't include tables starting with an underscore
        tableSchemas.RemoveAll(tableSchema =&gt; tableSchema.Name.StartsWith(&quot;_&quot;));
        // Don't include columns of &quot;geometry&quot; type.
        tableSchema.Columns.ToList().RemoveAll(x =&gt; x.DataTypeName == &quot;geometry&quot;);
    }
}
</code></pre>
<p>To assist in code-generation a number of high-level APIs are available to help with identifying Services, e.g:</p>
<ul>
<li><code>operation.IsCrud()</code> - Is read-only AutoQuery or AutoCrud write Service</li>
<li><code>operation.IsCrudWrite()</code> - Is AutoCrud write Service</li>
<li><code>operation.IsCrudRead()</code> - Is AutoQuery read-only Service</li>
<li><code>operation.ReferencesAny()</code> - The DTO Type is referenced anywhere in the Service (e.g. Request/Response DTOs, Inheritance, Generic Args, etc)</li>
<li><code>type.InheritsAny()</code> - The DTO inherits any of the specified type names</li>
<li><code>type.ImplementsAny()</code> - The DTO implements any of the specified interface type names</li>
</ul>
<h3 id="mixing-generated-autoquery-services-existing-code-first-services">Mixing generated AutoQuery Services &amp; existing code-first Services<a class="header-anchor" href="javascript:;" onclick="location.hash='#mixing-generated-autoquery-services-existing-code-first-services'" aria-label="Permalink"> </a></h3>
<p>The expected use-case for these new features is that you'd create a new project that points to an existing database to bootstrap your project with code-first AutoQuery Services using the dotnet tool to download the generated types, i.e:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p><code>x csharp https://localhost:5001 -path /crud/all/csharp</code></p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>At which point you'd &quot;eject&quot; from the generated AutoQuery Services (forgetting about this feature), copy the generated types into your <strong>ServiceModel</strong> project and continue on development as code-first Services just as if you'd created the Services manually.</p>
<p>But the <code>GenerateCrudServices</code> feature also supports a &quot;hybrid&quot; mode where you can also just generate Services for any <strong>new</strong> AutoQuery Services that don't exist, i.e. for tables for which there are no existing services which you can access their generated Services from:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p><code>x csharp https://localhost:5001 -path /crud/new/csharp</code></p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>The existing <code>/crud/all/csharp</code> Service continues to return generated Services for all Tables but will stitch together and use existing types where they exist.</p>
<blockquote>
<p>If your new code first services are missing, remember to make sure your AppHost is scanning the assembly they belong to by using <code>typeof(MyGeneratedType).Assembly</code> in your <code>AppHost</code> base constructor.</p>
</blockquote>
<h3 id="trying-it-out">Trying it out<a class="header-anchor" href="javascript:;" onclick="location.hash='#trying-it-out'" aria-label="Permalink"> </a></h3>
<p>We now have all the features we need to quickly servicify an existing database that we can easily customize to apply custom App logic to further protect &amp; validate access.</p>
<p>So you can quickly explore these new features locally, you can download the enhanced Northwind example with this customization above in the new <a href="https://github.com/NetCoreApps/NorthwindCrud">github.com/NetCoreApps/NorthwindCrud</a> project which you can download &amp; run with:</p>
<pre><code class="language-bash">x download NetCoreApps/NorthwindCrud
cd NorthwindCrud
dotnet run
</code></pre>
<p>This example App is also configured with other new features in incoming release including Crud Events in
<a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Startup.cs">Startup.cs</a>:</p>
<pre><code class="language-csharp">// Add support for auto capturing executable audit history for AutoCrud Services
container.AddSingleton&lt;ICrudEvents&gt;(c =&gt; new OrmLiteCrudEvents(c.Resolve&lt;IDbConnectionFactory&gt;()));
container.Resolve&lt;ICrudEvents&gt;().InitSchema();
</code></pre>
<p>As well as support for dynamically generated db rules in
<a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Validation.cs">Configure.Validation.cs</a>:</p>
<pre><code class="language-csharp">services.AddSingleton&lt;IValidationSource&gt;(c =&gt; 
    new OrmLiteValidationSource(c.Resolve&lt;IDbConnectionFactory&gt;()));

appHost.Resolve&lt;IValidationSource&gt;().InitSchema();
</code></pre>
<p>To be able to test the custom code generation the example is pre-populated with 3 users with different roles in
<a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Auth.cs">Configure.Auth.cs</a>:</p>
<pre><code class="language-csharp">// Register Users that don't exist
void EnsureUser(string email, string name, string[] roles=null)
{
    if (authRepo.GetUserAuthByUserName(email) != null) 
        return;
    
    authRepo.CreateUserAuth(new UserAuth {
        Email = email,
        DisplayName = name,
        Roles = roles?.ToList(),
    }, password:&quot;p@ss&quot;);
}

EnsureUser(&quot;employee@gmail.com&quot;, name:&quot;A Employee&quot;,   roles:new[]{ &quot;Employee&quot; });
EnsureUser(&quot;accounts@gmail.com&quot;, name:&quot;Account Dept&quot;, roles:new[]{ &quot;Employee&quot;, &quot;Accounts&quot; });
EnsureUser(&quot;manager@gmail.com&quot;,  name:&quot;The Manager&quot;,  roles:new[]{ &quot;Employee&quot;, &quot;Manager&quot; });
</code></pre>
<p>Of which you can also find published on <a href="https://github.com/NetCoreApps/NorthwindCrud">NorthwindCrud's home page</a>.</p>
<h3 id="autogen-customizations">AutoGen Customizations<a class="header-anchor" href="javascript:;" onclick="location.hash='#autogen-customizations'" aria-label="Permalink"> </a></h3>
<p>AutoGen's <a href="/servicify">Instantly Servicify existing Systems</a> feature works by automatically generating the AutoQuery &amp; Crud APIs and Data Models for all tables in the configured RDBMS's. Further customization of the DataModel Names, the user-defined Route Path they're hosted at &amp; the name of individual AutoQuery APIs for each operation using the <code>GenerateOperationsFilter</code>.</p>
<p>So if you had an existing table name called <code>applications</code> the default convention based names would be:</p>
<ul>
<li>Data Model: <code>Applications</code></li>
<li>APIs: <code>CreateApplications</code>, <code>PatchApplications</code>, <code>QueryApplications</code>, etc</li>
<li>Route: <code>/applications</code>, <code>/applications/{Id}</code></li>
</ul>
<p>You can change each of these default conventions with the new <code>GenerateOperationsFilter</code>, e.g:</p>
<pre><code class="language-csharp">Plugins.Add(new AutoQueryFeature {
    MaxLimit = 1000,
    GenerateCrudServices = new GenerateCrudServices {
        AutoRegister = true,
        GenerateOperationsFilter = ctx =&gt; {
            if (ctx.TableName == &quot;applications&quot;)
            {
                ctx.DataModelName = &quot;Application&quot;;
                ctx.PluralDataModelName = &quot;Apps&quot;;
                ctx.RoutePathBase = &quot;/apps&quot;;
                ctx.OperationNames = new Dictionary&lt;string, string&gt; {
                    [AutoCrudOperation.Create] = &quot;CreateApp&quot;,
                    [AutoCrudOperation.Patch] = &quot;ModifyApp&quot;,
                };
            }
        }
    }
});
</code></pre>
<p>Would result in:</p>
<ul>
<li>Data Model: <code>Application</code></li>
<li>APIs: <code>QueryApps</code>, <code>CreateApp</code>, <code>ModifyApp</code></li>
<li>Route: <code>/apps</code>, <code>/apps/{Id}</code></li>
</ul>
<h3 id="retrying-dart-grpc-example">Retrying Dart gRPC Example<a class="header-anchor" href="javascript:;" onclick="location.hash='#retrying-dart-grpc-example'" aria-label="Permalink"> </a></h3>
<p>We can see an immediate effect of these customizations in <strong>NorthwindCrud</strong> where most APIs now require Authentication:</p>
<p><img src="/img/pages/release-notes/v5.9/northwindcrud-metadata.png" alt="" /></p>
<p>If we then try to run our Dart <code>main.dart</code> example against the customized <strong>NorthwindCrud</strong> APIs by first regenerating gRPC protoc Types:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p><code>x proto-dart https://localhost:5001 -out lib</code></p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Then try rerunning <code>main.dart</code> where it will now fail with an <strong>Unauthorized</strong> exception:</p>
<p><img src="/img/pages/release-notes/v5.9/northwindcrud-noauth.png" alt="" /></p>
<p>To now be able to access most Services we'll need to <a href="/grpc/dart#dart-grpc-authenticated-request-example">Authenticate as registered user</a>.</p>
<p>As NorthwindCrud is <a href="https://github.com/NetCoreApps/NorthwindCrud/blob/master/Configure.Auth.cs">configured to use JWT</a> we can create an Authenticated gRPC client by adding the populated JWT Token from an Authenticated Request into the <strong>Authorization</strong> gRPC metadata Header:</p>
<pre><code class="language-dart">GrpcServicesClient createClient({CallOptions options}) {
  return GrpcServicesClient(ClientChannel('localhost', port:5054,
    options:ChannelOptions(credentials: ChannelCredentials.insecure())), 
    options:options);
}

void main(List&lt;String&gt; arguments) async {
    var authResponse = await createClient().postAuthenticate(
        Authenticate()..provider='credentials'..userName='manager@gmail.com'..password='p@ss');

    var authClient = createClient(options:CallOptions(metadata:{ 
            'Authorization': 'Bearer ${authResponse.bearerToken}' 
        }));

    var response = await authClient.getQueryCategory(QueryCategory());
    print(response.results);
    exit(0);
}
</code></pre>
<p>Now when we rerun <code>main.dart</code> we'll be able to access our Northwind categories again:</p>
<p><img src="/img/pages/release-notes/v5.9/northwindcrud-jwtauth.png" alt="" /></p>
</div>

                <div class="not-prose"></div>
                
                    <div class="not-prose py-8">
                        <a class="text-slate-500 font-semibold hover:text-indigo-600 flex items-center" href="https://github.com/ServiceStack/docs.servicestack.net/blob/main/MyApp/_pages/autoquery/autogen.md" target="_blank" rel="noopener noreferrer">
                            Edit this page on GitHub<svg class="ml-1 inline-block w-4 h-4" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" data-v-1ed99556=""><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg>
                        </a>
                    </div>

                    <div class="not-prose my-20">
                                <nav class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 px-4 sm:px-0">
                                    <div class="-mt-px flex w-0 flex-1">
                                            <a href="/autoquery/audit-log" class="inline-flex items-center border-t-2 border-transparent pt-4 pr-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                <!-- Heroicon name: mini/arrow-long-left -->
                                                <svg class="mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M18 10a.75.75 0 01-.75.75H4.66l2.1 1.95a.75.75 0 11-1.02 1.1l-3.5-3.25a.75.75 0 010-1.1l3.5-3.25a.75.75 0 111.02 1.1l-2.1 1.95h12.59A.75.75 0 0118 10z" clip-rule="evenodd"></path>
                                                </svg>
                                                AutoQuery Audit Log
                                            </a>
                                    </div>
                                    <div class="hidden md:-mt-px md:flex"></div>
                                    <div class="-mt-px flex w-0 flex-1 justify-end">
                                            <a href="/autoquery/bookings-crud" class="inline-flex items-center border-t-2 border-transparent pt-4 pl-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                AutoQuery CRUD Bookings Demo
                                                <!-- Heroicon name: mini/arrow-long-right -->
                                                <svg class="ml-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z" clip-rule="evenodd"></path>
                                                </svg>
                                            </a>
                                    </div>
                                </nav>
                    </div>
            </div>
                
                <div class="docmap hidden 2xl:block flex-none w-64 pl-8 mr-8">
                    <div class="fixed bg-white dark:bg-black flex flex-col overflow-y-auto pt-10 px-8 pb-6" style="height:calc(100vh - 50px);">
                        <div>
                            <h5 class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-100">
                                On This Page
                            </h5>
                            <ul class="text-slate-700 text-sm leading-6">
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#export-code-first-dtos'" data-id="export-code-first-dtos" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Export Code-First DTOs
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="generating-autoquery-apis-and-data-models" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#generating-autoquery-apis-and-data-models'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Generating AutoQuery APIs and Data Models
                                                        </span>
                                                    </li>
                                                    <li data-id="updating-generated-services" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#updating-generated-services'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Updating Generated Services
                                                        </span>
                                                    </li>
                                                    <li data-id="switch-to-code-first-dev-model" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#switch-to-code-first-dev-model'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Switch to code-first dev model
                                                        </span>
                                                    </li>
                                                    <li data-id="autogen-specific-options-in-autogen-dtos" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#autogen-specific-options-in-autogen-dtos'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            AutoGen specific options in AutoGen DTOs
                                                        </span>
                                                    </li>
                                                    <li data-id="autogen-code-generation-customizations" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#autogen-code-generation-customizations'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            AutoGen Code Generation Customizations
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#autoregister-autogen-autoquery-services'" data-id="autoregister-autogen-autoquery-services" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            AutoRegister AutoGen AutoQuery Services
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="instantly-servicify-northwind-db-with-grpc" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#instantly-servicify-northwind-db-with-grpc'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Instantly Servicify Northwind DB with gRPC
                                                        </span>
                                                    </li>
                                                    <li data-id="calling-grpc-ssl-services" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#calling-grpc-ssl-services'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Calling gRPC SSL Services
                                                        </span>
                                                    </li>
                                                    <li data-id="autogens-autoregister-implementation" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#autogens-autoregister-implementation'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            AutoGen&#x27;s AutoRegister Implementation
                                                        </span>
                                                    </li>
                                                    <li data-id="createcrudservices-instructions" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#createcrudservices-instructions'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            CreateCrudServices Instructions
                                                        </span>
                                                    </li>
                                                    <li data-id="customize-code-generation-to-include-app-conventions" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#customize-code-generation-to-include-app-conventions'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Customize Code Generation to include App Conventions
                                                        </span>
                                                    </li>
                                                    <li data-id="mixing-generated-autoquery-services-existing-code-first-services" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#mixing-generated-autoquery-services-existing-code-first-services'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Mixing generated AutoQuery Services &amp; existing code-first Services
                                                        </span>
                                                    </li>
                                                    <li data-id="trying-it-out" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#trying-it-out'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Trying it out
                                                        </span>
                                                    </li>
                                                    <li data-id="autogen-customizations" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#autogen-customizations'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            AutoGen Customizations
                                                        </span>
                                                    </li>
                                                    <li data-id="retrying-dart-grpc-example" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#retrying-dart-grpc-example'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Retrying Dart gRPC Example
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
        </div>
    </div>    
</div>

<script>
//doc instructions
if (document.querySelector('.hide-title')) {
    const el = document.querySelector('#doc section h1') 
    if (el) el.style.display='none'
}
</script>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"


    const App = {
        setup() {
            function nav(url) {
                window.open(url)
            }
            return { nav }
        }
    }
    
const Sidebar = {
    setup() {
        const open = ref(true)
        return { open }
    }
}

mount('#doc', App)
mount('#sidebar', Sidebar)
</script>

<script src="/lib/js/highlight.js"></script>
<script>hljs.highlightAll()</script>
<script src="/lib/js/lite-yt-embed.js"></script>
<script src="/mjs/docs.mjs" type="module"></script>


    </main>
</div>

<script type="module">
import { init } from "app.mjs"
init()
</script>





</body>
</html>