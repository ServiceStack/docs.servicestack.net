<!doctype html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7722718-13"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'UA-7722718-13');</script>
    
    <meta charset="utf-8"/>
    <meta name='date' content='2024-11-19T09:12:02.8760178Z'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="/img/logo.svg">
    <title>Sign in with Apple Auth Provider</title>
    <script>
    if (location.search === "?dark") localStorage.setItem('color-scheme','dark') 
    if (location.search === "?light") localStorage.removeItem('color-scheme') 
    const cls = document.querySelector('html').classList
    if (localStorage.getItem('color-scheme') === 'dark')
        cls.add('dark')
    else
        cls.remove('dark')
    </script>
    <link rel="stylesheet" href="/css/app.css">
    

    <script async src="https://ga.jspm.io/npm:es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
{
    "imports": {
        "app.mjs": "/mjs/app.mjs",
        "vue": "/lib/mjs/vue.min.mjs",
        "@servicestack/client": "/lib/mjs/servicestack-client.min.mjs",
        "@servicestack/vue": "/lib/mjs/servicestack-vue.min.mjs"
    }
}
</script>
</head>
<body class="bg-white dark:bg-black dark:text-white">

<header id="header" class="top-0 fixed z-50 h-14 bg-white dark:bg-black opacity-90 w-full shadow">
  <nav class="border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-black">
    <div class="mx-auto max-w-[100rem] pr-4 sm:pr-6 lg:pr-8">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="flex flex-shrink-0 items-center">
            <a class="mr-2 lg:mr-8 flex items-center" href="/">
                <svg class="w-8 h-8 sm:ml-2 sm:w-12 sm:h-12" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M10 6c1.544 1.76 2.276 4.15 2.217 6.61c3.968 1.67 9.924 6.12 11.181 12.39H28C26.051 14.31 14.918 6.77 10 6zm-2 7c4.67 4.913.81 11.582-4 12h18.97C21.5 18.289 11.95 13.533 8 13z"/></svg>
                <span class="hidden sm:block text-2xl font-semibold">Documentation</span>
            </a>
          </div>
            <div class="hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-4 lg:space-x-8">
                <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
                        <a href="/templates/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            <span class="hidden xl:inline mr-1">Project</span> Templates
                        </a>
                        <a href="/vue/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Vue
                        </a>
                        <a href="/autoquery/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            AutoQuery
                        </a>
                        <a href="/auth/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-indigo-500 text-gray-900">
                            Auth
                        </a>
                        <a href="/ormlite/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            OrmLite
                        </a>
                        <a href="/redis/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Redis
                        </a>
                        <a href="/locode/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            Locode
                        </a>
                        <a href="/grpc/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            gRPC
                        </a>
            </div>
        </div>
        <div class="hidden sm:ml-6 sm:flex sm:items-center">
            <typesense></typesense>
            <dark-mode-toggle class="ml-2 w-10"></dark-mode-toggle>
        </div>
        <div class="-mr-2 flex items-center sm:hidden">
          <!-- Mobile menu button -->
          <button type="button" v-on:click="open=!open" class="inline-flex items-center justify-center rounded-md bg-white dark:bg-black p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:ring-offset-black" aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <!-- Menu open: "hidden", Menu closed: "block" -->
            <svg :class="['h-6 w-6', open ? 'hidden' : 'block']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
            <!-- Menu open: "block", Menu closed: "hidden" -->
            <svg :class="['h-6 w-6', open ? 'block' : 'hidden']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div v-cloak v-if="open" class="sm:hidden">
        <div class="space-y-1 pb-3 pt-2">
            <!-- Current: "border-indigo-500 bg-indigo-50 text-indigo-700", Default: "border-transparent text-gray-600 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-800" -->
                    <a href="/templates/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Project Templates
                    </a>
                    <a href="/vue/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Vue
                    </a>
                    <a href="/autoquery/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        AutoQuery
                    </a>
                    <a href="/auth/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-indigo-500 bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200">
                        Auth
                    </a>
                    <a href="/ormlite/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        OrmLite
                    </a>
                    <a href="/redis/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Redis
                    </a>
                    <a href="/locode/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Locode
                    </a>
                    <a href="/grpc/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        gRPC
                    </a>
        </div>
    </div>
  </nav>
</header>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"

const Header = {
    setup() {
        const open = ref(false)
        return { open }
    }
}
mount('#header', Header)
</script>


<div class="min-h-screen">
    <main role="main" class="pt-16 pb-3 max-w-[100rem] mx-auto">
        



<style>
.active {
    color: #0ea5e9 !important;
}
</style>
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/typography.css">
<link rel="stylesheet" href="/css/lite-yt-embed.css">

<div class="w-full max-w-[100rem] mx-auto">
    <div class="flex flex-wrap">
        <div id="sidebar" class="z-40 inset-0 flex-none bg-white dark:bg-black lg:w-64 xl:w-80">
            <button v-cloak v-on:click="open=true" :class="['text-gray-400 hover:text-gray-500 pt-4 pl-2 absolute transform transition-all duration-200', open ? 'opacity-0 translate-x-56' : 'opacity-100']" title="Open Sidebar">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H10m10 0l-4 4m4-4l-4-4M4 4v16"/></svg>
            </button>
            <div :class="['fixed bg-white dark:bg-black h-screen overflow-y-auto scrolling-touch overflow-hidden shadow lg:shadow-none transform transition-transform duration-200', open ? '' : 'translate-x-[-100%]']">
                <nav class="sidebar lg:w-64 xl:w-80 px-1 pt-6 pb-16 overflow-y-auto font-medium text-sm lg:text-base sm:px-3 xl:px-5" aria-label="Sidebar">
                    <close-button title="Close Sidebar" class="lg:hidden -mr-2" v-on:close="open=false"></close-button>
                                <a href="/auth/" class="block flex items-center whitespace-nowrap">
<svg class='h-6 w-6 shrink-0 text-sky-500' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' aria-hidden='true'><path stroke-linecap='round' stroke-linejoin='round' d='M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25'></path></svg>                                    <span class="p-2 pl-3 font-display font-medium text-slate-900 dark:text-white">
Auth                                    </span>
                                </a>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/auth/client-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Client Authentication
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/restricting-services" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Restricting Services
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/encrypted-messaging" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Encrypted Messaging
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    ASP.NET Core Identity Auth
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/auth/identity-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Overview
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/jwt-identity-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        JWT Identity Auth
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/apikeys" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        API Keys
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/admin-apikeys" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Simple Admin Auth with API Keys
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/migrate-to-identity-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Migrate to Identity Auth
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/identityserver" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Using IdentityServer4 Auth
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    ServiceStack Auth
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/auth/authentication-and-authorization" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Overview
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/auth-repository" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Auth Repository
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/identity-servicestack" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Using ServiceStack Auth in MVC
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/sessions" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Sessions
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/jwt-authprovider" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        JWT AuthProvider
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/api-key-authprovider" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        API Key AuthProvider
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/signin-with-apple" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full active font-semibold text-sky-500 before:bg-sky-500">
                                        Sign in with Apple AuthProvider
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/anti-forgery" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Anti Forgery
                                    </a>
                                </li>
                        </ul>
                </nav>
            </div>
        </div>
        <div id="doc" class="mx-auto flex">
            <div class="mt-8 mx-auto prose lg:prose-lg">
                
                    <section class="not-prose mb-16 md:mb-12">
                        <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 dark:text-gray-50 sm:text-5xl md:text-6xl">
                            Sign in with Apple Auth Provider
                        </h1>
                    </section>

                <div class="not-prose"></div>

                <div class="content"><p>ServiceStack Sign In with Apple Auth Provider docs &amp; Integration docs from <a href="https://github.com/NetCoreApps/AppleSignIn">github.com/NetCoreApps/AppleSignIn</a>.</p>
<p><img src="/img/pages/dev/web-signin-with-apple-login.png" alt="" /></p>
<h2 id="sign-in-with-apple-requirements">Sign In with Apple Requirements<a class="header-anchor" href="javascript:;" onclick="location.hash='#sign-in-with-apple-requirements'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<ul>
<li>Membership <strong>Team ID</strong> from <a href="https://developer.apple.com/account/#/membership/">developer.apple.com/account/#/membership/</a></li>
<li>Create &amp; configure <strong>App ID</strong> from <a href="https://developer.apple.com/account/resources/identifiers/list">developer.apple.com/account/resources/identifiers/list</a></li>
<li>Use <strong>App ID</strong> to create &amp; configure <strong>Service ID</strong> from <a href="https://developer.apple.com/account/resources/identifiers/list/serviceId">developer.apple.com/account/resources/identifiers/list/serviceId</a></li>
<li>Use <strong>App ID</strong> to create &amp; configure <strong>Private Key</strong> from <a href="https://developer.apple.com/account/resources/authkeys/list">developer.apple.com/account/resources/authkeys/list</a></li>
</ul>
<h3 id="app-requirements-walkthrough">App Requirements Walkthrough<a class="header-anchor" href="javascript:;" onclick="location.hash='#app-requirements-walkthrough'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Okta has a <a href="https://developer.okta.com/blog/2019/06/04/what-the-heck-is-sign-in-with-apple">good walkthrough explaining Sign In with Apple</a> and steps required to create the above resources.</p>
<p>Note: Service ID must be configured with non-localhost trusted domain and HTTPS callback URL, for development you can use:</p>
<ul>
<li>Domain: <code>dev.servicestack.com</code></li>
<li>Callback URL: <code>https://dev.servicestack.com:5001/auth/apple</code></li>
</ul>
<p>See docs on <a href="/netcore-localhost-cert">Configure localhost development dev certificate</a> for instructions &amp; info for being able to use a single <code>local.servicestack.com</code> or <code>dev.servicestack.com</code> local DNS names to support local development of all platforms.</p>
<h3 id="apple-services-id-configuration">Apple Services ID configuration<a class="header-anchor" href="javascript:;" onclick="location.hash='#apple-services-id-configuration'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>If you also need to support Android you'll also need to register the <code>https://dev.servicestack.com:5001/auth/apple?ReturnUrl=android:com.servicestack.auth</code> URL will as a valid Callback URL in your Apple <strong>Services ID</strong> configuration.</p>
<h2 id="getting-started">Getting Started<a class="header-anchor" href="javascript:;" onclick="location.hash='#getting-started'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>As the elliptic curve algorithms required to integrate with Sign In with Apple requires .NET Core 3 APIs the <code>AppleAuthProvider</code> is implemented in the <strong>ServiceStack.Extensions</strong> NuGet Package.</p>
<h3 id="create-project-with-preferred-auth-configuration">Create project with preferred Auth Configuration<a class="header-anchor" href="javascript:;" onclick="location.hash='#create-project-with-preferred-auth-configuration'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>A quick way to can create a working project from scratch with your preferred configuration using the <a href="/mix-tool">mix tool</a>, e.g:</p>
<pre><code class="language-bash">mkdir web &amp;&amp; cd web
x mix init auth-ext auth-db sqlite
</code></pre>
<p>This creates an empty project, with Auth Enabled, adds the <strong>ServiceStack.Extensions</strong> NuGet package, registers OrmLite, SQLite and the <code>OrmLiteAuthRepository</code>.</p>
<p>Copy your Apple <strong>Private Key</strong> to your Apps <strong>Content Folder</strong> then configure your OAuth providers in <strong>appsettings.json</strong>:</p>
<pre><code class="language-json">{
  &quot;oauth.apple.RedirectUrl&quot;: &quot;https://dev.servicestack.com:5001/&quot;,
  &quot;oauth.apple.CallbackUrl&quot;: &quot;https://dev.servicestack.com:5001/auth/apple&quot;,
  &quot;oauth.apple.TeamId&quot;: &quot;{Team ID}&quot;,
  &quot;oauth.apple.ClientId&quot;: &quot;{Service ID}&quot;,
  &quot;oauth.apple.BundleId&quot;: &quot;{Bundle ID}&quot;,
  &quot;oauth.apple.KeyId&quot;: &quot;{Private KeyId}&quot;,
  &quot;oauth.apple.KeyPath&quot;: &quot;AuthKey_{Private KeyId}.p8&quot;,
  &quot;jwt.AuthKeyBase64&quot;: &quot;{Base64 JWT Auth Key}&quot;
}
</code></pre>
<div class="info custom-block">
            <p class="custom-block-title">INFO</p><p>See JWT docs for how to <a href="/auth/jwt-authprovider#generate-new-auth-key">Generate a new Auth Key</a></p>
</div>
<p>When needing to support Mobile or Desktop Apps using OAuth Providers like Sign In with Apple, we recommend using it in combination with the <a href="/auth/jwt-authprovider">JWT Auth Provider</a> with <code>UseTokenCookie</code> enabled so the Authorization is returned in a stateless JWT Token that can be persisted for optimal Authentication across App restarts, e.g:</p>
<pre><code class="language-csharp">Plugins.Add(new AuthFeature(() =&gt; new CustomUserSession(),
    new IAuthProvider[] {
        new JwtAuthProvider(AppSettings) {
            UseTokenCookie = true,
        },
        new AppleAuthProvider(AppSettings)
            .Use(AppleAuthFeature.FlutterSignInWithApple), 
    }));
</code></pre>
<h3 id="clone-working-client-server-project">Clone working Client &amp; Server Project<a class="header-anchor" href="javascript:;" onclick="location.hash='#clone-working-client-server-project'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>For a working example you can <strong>clone</strong> or <strong>fork</strong> the <a href="https://github.com/NetCoreApps/AppleSignIn">/NetCoreApps/AppleSignIn</a> repo or alternatively download the latest master <code>.zip</code> with:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x download NetCoreApps/AppleSignIn</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<p>Then after updating <strong>appsettings.json</strong> with your iOS App's configuration, copying your Private Key into the <code>web</code> Content Folder you're all set to run your App:</p>
<div class="not-prose sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)">
                <div class="flex-grow bg-gray-800">
                    <div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>dotnet run</p>
</div>
                    </div>
                <div class="flex">
                    <div class="bg-green-600 text-white p-1.5 pb-0">
                        <svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <svg class="nocopy w-6 h-6" title="copy" fill='none' stroke='white' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                            <path stroke-linecap='round' stroke-linejoin='round' stroke-width='1' d='M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2'></path>
                        </svg>
                    </div>
                </div>
            </div>
<h3 id="android-support">Android Support<a class="header-anchor" href="javascript:;" onclick="location.hash='#android-support'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To support Android we recommend using <code>dev.servicestack.com</code> which resolves to the <code>10.0.2.2</code> special IP in the Android Emulator that maps to <code>127.0.0.1</code> on your Host OS. To also be able to use it during development you'll need to add an entry in your OS's <code>hosts</code> file
(e.g. <code>%SystemRoot%\System32\drivers\etc\hosts</code> for Windows or <code>/system/etc/hosts</code> on macOS/Linux):</p>
<pre><code>127.0.0.1       dev.servicestack.com
</code></pre>
<p>If you don't need to support android you can use <code>local.servicestack.com</code> instead which resolves to <code>127.0.0.1</code>, please see <a href="/netcore-localhost-cert">configuring localhost development dev certificate</a> for more info.</p>
<p>Then you can view your App using the non-localhost domain name:</p>
<ul>
<li><a href="https://dev.servicestack.com:5001/">https://dev.servicestack.com:5001/</a></li>
</ul>
<p>You can then use the <a href="/auth/authentication-and-authorization#embedded-login-page-fallback">Embedded Login Page</a> which renders the Sign In button for each of the registered OAuth providers in your <code>AuthFeature</code>:</p>
<ul>
<li><a href="https://dev.servicestack.com:5001/login">https://dev.servicestack.com:5001/login</a></li>
</ul>
<p>Clicking on <strong>Sign in with Apple</strong> button should let you Sign In with Apple. After successfully signing in you can view the <code>AllUsersInfo</code> Service to view a dump of all User Sessions &amp; User Auth Info stored in the registered RDBMS:</p>
<ul>
<li><a href="https://dev.servicestack.com:5001/users">https://dev.servicestack.com:5001/users</a></li>
</ul>
<h2 id="flutter-ios-android-app">Flutter iOS &amp; Android App<a class="header-anchor" href="javascript:;" onclick="location.hash='#flutter-ios-android-app'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>A reference client Flutter iOS &amp; Android App showcasing integration with Sign In with Apple is available at <a href="https://github.com/NetCoreApps/AppleSignIn/tree/master/flutter/auth">/flutter/auth</a>.</p>
<p><img src="/img/pages/dev/android-flutter-auth.png" alt="" /></p>
<p>The first task the App does is to create an instance of the <code>IServiceClient</code> it should use using the recommended <code>ClientFactory</code> API which in combination with the conditional import below returns the appropriate configured Service Client implementation for the platform it's running on, for iOS &amp; Android it uses the native <code>JsonServiceClient</code>:</p>
<pre><code class="language-dart">import 'package:servicestack/web_client.dart' if (dart.library.io) 'package:servicestack/client.dart';
//...

AppState(client: kDebugMode
  ? ClientFactory.createWith(ClientOptions(baseUrl:'https://dev.servicestack.com:5001', ignoreCert:true))
  : ClientFactory.create(&quot;https://prod.app&quot;))
</code></pre>
<p>Using a constant like <code>kDebugMode</code> ensures that create Service Clients that ignore SSL Certificate errors are stripped from production builds.</p>
<h3 id="sign_in_with_apple-package">sign_in_with_apple package<a class="header-anchor" href="javascript:;" onclick="location.hash='#sign_in_with_apple-package'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To support both iOS and Android we're utilizing the <a href="https://pub.dev/packages/sign_in_with_apple">sign_in_with_apple</a> <code>SignInWithAppleButton</code> which takes care of invoking iOS's native Sign In with Apple behavior as well as enabling support for Android by wrapping an OAuth Web Flow in a WebView. Both approaches, if successful will result in an Authenticated IdentityToken which you can use to Authenticate with your ServiceStack instance to establish an Authenticated session.</p>
<p>The <code>SignInWithAppleButton</code> functions as a normal button which is placed in your Widgets <code>build()</code> method where you want the UI Button to appear, in this case it'll render the <strong>Sign in with Apple</strong> button if the user is not Authenticated otherwise it renders a <strong>Sign Out</strong> <code>FlatButton</code>:</p>
<pre><code class="language-dart">state.isAuthenticated
  ? FlatButton(onPressed: state.signOut, child: Text('Sign Out'))
  : SignInWithAppleButton(onPressed: () async { await handleSignIn(state); })
</code></pre>
<p>When either is pressed it invokes its <code>onPressed</code> event where the Apple Sign in functionality is initiated,
within the <code>handleSignIn</code> implementation which reflects the behavior of the different platforms with Android
using the OAuth Web Flow to authenticate with its ReturnUrl needing the Android's App Id that it should redirect to.</p>
<p>The native integration in iOS is more streamlined with iOS handling the Auth flow with Apple's servers:</p>
<pre><code class="language-dart">var clientID = &quot;net.servicestack.myappid&quot;;
var redirect = &quot;https://dev.servicestack.com:5001/auth/apple?ReturnUrl=android:com.servicestack.auth&quot;;
var scopes = [ AppleIDAuthorizationScopes.email, AppleIDAuthorizationScopes.fullName ];
final credentials = Platform.isAndroid
  ? await SignInWithApple.getAppleIDCredential(scopes:scopes,
      webAuthenticationOptions:WebAuthenticationOptions(clientId:clientID,redirectUri:Uri.parse(redirect)))
  : await SignInWithApple.getAppleIDCredential(scopes:scopes);
</code></pre>
<h3 id="new-user-registration">New User Registration<a class="header-anchor" href="javascript:;" onclick="location.hash='#new-user-registration'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>When a user signs into your App the first time they'll be presented with the option on what name they want to use and whether or not they want to provide their own email or use Apple's hidden email forwarding service:</p>
<p><img src="/img/pages/dev/ios-flutter-sign-in-with-apple-new-user.png" alt="" /></p>
<p>Subsequent re-authentication attempts in iOS are more seamless &amp; effortless for users whilst Android users will still need to go through the OAuth web flow:</p>
<p><img src="/img/pages/dev/android-flutter-auth-request.png" alt="" /></p>
<p>If Sign in is successful it will return the identity token which we can use to Authenticate against our remote ServiceStack instance. Importantly Apple only returns the Users name on its initial sign in which we'll
need to include in our <code>Authenticate</code> request in order for it to be used when creating the new user account.
The same code can also be used to re-authenticate existing users:</p>
<pre><code class="language-dart">// Sign in with Apple success!
var idToken = credentials.identityToken;

// Authenticate with server using idToken &amp; convert into stateless JWT Cookie + persistent auth token
var response = await state.client.post(Authenticate()
    ..provider = 'apple'
    ..accessToken = idToken, args: {
        'authorizationCode': credentials.authorizationCode,
        'givenName': credentials.givenName,
        'familyName': credentials.familyName,
    }); // JwtAuthProvider.UseTokenCookie returns session as JWT

state.saveAuth(response);
</code></pre>
<h3 id="persistent-authenticated-sessions">Persistent Authenticated Sessions<a class="header-anchor" href="javascript:;" onclick="location.hash='#persistent-authenticated-sessions'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>We recommend using JWT to store authenticated sessions as it allows using a single approach to support multiple OAuth providers, inc. Username/Password Credentials Auth if you want your App to support it, it's also the fastest &amp; most resilient Auth Provider which requires no I/O to validate &amp; no server state as it's all encapsulated within the stateless client JWT token.</p>
<p>As all DTOs are JSON Serializable, the easiest way to persist Authentication is to save the <code>AuthenticateResponse</code>
(which contains both JWT Bearer &amp; Refresh Tokens) in Flutter's <code>SharedPreferences</code> abstraction which has implementations
available in all its supported platforms.</p>
<p>Populating a Service Client with <code>bearerToken</code> and <code>refreshToken</code> enables it to make authenticated requests which is
done on successful Sign in requests and when the App is initialized which is also what allows for persistent authentication across App restarts.</p>
<pre><code class="language-dart">class AppState extends ChangeNotifier {
  SharedPreferences prefs;
  IServiceClient client;
  AuthenticateResponse auth;
  bool hasInit = false;

  bool get isAuthenticated =&gt; auth != null;

  AppState({this.client});

  Future&lt;AppState&gt; init() async {
    prefs = await SharedPreferences.getInstance();
    var json = prefs.getString('auth');
    auth = json != null ? AuthenticateResponse.fromJson(jsonDecode(json)) : null;

    initClientAuth(client, auth);

    if (auth != null &amp;&amp; !await checkIsAuthenticated(client)) {
      auth = client.bearerToken = client.refreshToken = null;
      prefs.remove('auth');
    }
    hasInit = true;
    return this;
  }

  void signOut() =&gt; saveAuth(null);

  void saveAuth(AuthenticateResponse response) {
    auth = response;
    if (auth != null) {
      var json = jsonEncode(auth.toJson());
      prefs.setString('auth', json);
    } else {
      prefs.remove('auth');
    }
    initClientAuth(client, auth);
    notifyListeners();
  }
}

void initClientAuth(IServiceClient client, AuthenticateResponse auth) {
  client.bearerToken = auth?.bearerToken;
  client.refreshToken = auth?.refreshToken;
  if (auth == null) {
    client.clearCookies();
  }
}

Future&lt;bool&gt; checkIsAuthenticated(IServiceClient client) async {
  try {
    await client.post(Authenticate());
    return true;
  } catch (e) {
    return false;
  }
}
</code></pre>
<p>When signing out we also want to remove its cookies to clear its <code>ss-tok</code> authenticated JWT Cookie inc. any other user identifying cookies.</p>
<p>The call to <code>notifyListeners()</code> is part of Flutter's <code>ChangeNotifier</code>
<a href="https://flutter.dev/docs/development/data-and-backend/state-mgmt/simple">Simple app state management</a> solution which notifies widgets using it of state changes, triggering re-rendering of its UI.</p>
<h3 id="authenticated-api-requests">Authenticated API Requests<a class="header-anchor" href="javascript:;" onclick="location.hash='#authenticated-api-requests'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To test Authentication the App makes a call to <code>HelloSecure</code> Secured C# ServiceStack Service that validates Auth only
access using the <code>[ValidateIsAuthenticated]</code> <a href="/declarative-validation">declarative validation attribute</a>:</p>
<pre><code class="language-csharp">[ValidateIsAuthenticated]
[Route(&quot;/hello/secure&quot;)]
[Route(&quot;/hello/secure/{Name}&quot;)]
public class HelloSecure : IReturn&lt;HelloResponse&gt;
{
    public string Name { get; set; }
}

public class HelloResponse
{
    public string Result { get; set; }
}

public class MyServices : Service
{
    public object Any(HelloSecure request) =&gt; 
        new HelloResponse { Result = $&quot;Secure {request.Name}!&quot; };
}
</code></pre>
<p>Which uses the Dart client DTOs generated using the <a href="/dart-add-servicestack-reference">Dart ServiceStack Reference</a> feature to perform its Typed API Request:</p>
<pre><code class="language-dart">  floatingActionButton: FloatingActionButton(
    onPressed: _callService,
    tooltip: 'HTTP API Example',
    child: Icon(Icons.play_arrow),
  ), // This trailing comma makes auto-formatting nicer for build methods.

//...

  Future&lt;void&gt; _callService() async {
    try {
      var client = Provider.of&lt;AppState&gt;(context, listen: false).client;
      var response = await client.get(HelloSecure()..name = &quot;Flutter&quot;);
      setState(() {
        result = response.result;
      });
    } on WebServiceException catch (e) {
      setState(() {
        result = &quot;${e.statusCode}: ${e.message}&quot;;
      });
    }
  }
</code></pre>
<p>Which if authenticated will update the UI with API Response for both iOS:</p>
<p><img src="/img/pages/dev/ios-flutter-auth-request.jpeg" alt="" /></p>
<p>and Android:</p>
<p><img src="/img/pages/dev/android-flutter-secure.png" alt="" /></p>
<p>Or fail with an <code>Unauthorized: Not Authenticated</code> error if the user is not Signed in.</p>
<h3 id="resetting-app-sign-in">Resetting App Sign in<a class="header-anchor" href="javascript:;" onclick="location.hash='#resetting-app-sign-in'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>As the Sign in behavior is different for new &amp; existing users you may need to find yourself needing to retest the new user workflow which you can do by removing your existing relationship to your App by signing into your Apple Id:</p>
<ul>
<li><a href="https://appleid.apple.com">appleid.apple.com</a></li>
</ul>
<p>Then under <strong>Security</strong> click on <strong>Manage apps &amp; websites...</strong></p>
<p><img src="/img/pages/dev/appleid-manage-signin.png" alt="" /></p>
<p>Which will let you delete your existing user id and relationship with existing Apps you've signed into:</p>
<p><img src="/img/pages/dev/appleid-reset-signin.png" alt="" /></p>
<p>Now next time you Sign in to your App it will behave as an initial new User request complete with a new unique user id.</p>
<h3 id="flutter-android-sign_in_with_apple-requirements">Flutter Android sign_in_with_apple requirements<a class="header-anchor" href="javascript:;" onclick="location.hash='#flutter-android-sign_in_with_apple-requirements'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>It's already configured in this project, but to be able to use <a href="https://pub.dev/packages/sign_in_with_apple">sign_in_with_apple</a> in your own Flutter Android Apps you'll need to register this Android intent in your <strong>AndroidManifest.xml</strong>:</p>
<pre><code class="language-xml">&lt;application ...&gt;

    &lt;!-- Set up the Sign in with Apple activity, such that it's callable from the browser-redirect --&gt;
    &lt;activity
        android:name=&quot;com.aboutyou.dart_packages.sign_in_with_apple.SignInWithAppleCallback&quot;
        android:exported=&quot;true&quot;
        &gt;
        &lt;intent-filter&gt;
            &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;
            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
            &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;

            &lt;data android:scheme=&quot;signinwithapple&quot; /&gt;
            &lt;data android:path=&quot;callback&quot; /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
    
    &lt;!-- Don't delete the meta-data below.
            This is used by the Flutter tool to generate GeneratedPluginRegistrant.java --&gt;
    &lt;meta-data
        android:name=&quot;flutterEmbedding&quot;
        android:value=&quot;2&quot; /&gt;

&lt;/application&gt;
</code></pre>
<h4 id="servicestack-appleauthprovider-configuration">ServiceStack AppleAuthProvider configuration<a class="header-anchor" href="javascript:;" onclick="location.hash='#servicestack-appleauthprovider-configuration'" aria-label="Permalink">&ZeroWidthSpace;</a></h4>
<p>This client App configuration works in combination with the Server's <code>AppleAuthProvider</code> to redirect to your Android's App intent which needs to be configured with:</p>
<pre><code class="language-csharp">new AppleAuthProvider(AppSettings)
    .Use(AppleAuthFeature.FlutterSignInWithApple), 
</code></pre>
<p>Where it adds support for <code>?ReturnUrl=android:&lt;android-package-id&gt;</code> Callback URLs that your Flutter Android App needs to use.</p>
<h2 id="swiftui-app">SwiftUI App<a class="header-anchor" href="javascript:;" onclick="location.hash='#swiftui-app'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>The <a href="https://github.com/NetCoreApps/AppleSignIn">/NetCoreApps/AppleSignIn</a> repo also includes a SwiftUI iOS Example App available at <a href="https://github.com/NetCoreApps/AppleSignIn/tree/master/swift/MyApp">/swift/MyApp</a> as it'll likely end up being another popular platform that will utilize <strong>Sign in with Apple</strong>.</p>
<p>It's a good idea to checkout Apple's official docs for their recommended approach for
<a href="https://developer.apple.com/documentation/authenticationservices/implementing_user_authentication_with_sign_in_with_apple">Implementing User Authentication with Sign in with Apple</a> in Swift Apps which includes a
sample iOS Storyboard Swift App which enlists the built-in <a href="https://developer.apple.com/documentation/authenticationservices">Authentication Services Framework</a> for iOS's native Sign in feature.</p>
<p>For simplicity &amp; comparison purposes we've developed an App similar to the Flutter example using
Apple's new declarative state-of-the-art <a href="https://developer.apple.com/xcode/swiftui/">SwiftUI Framework</a>, which like
Flutter is a declarative Reactive UI Framework allowing you to construct your App's UI &amp; logic in code - most of which is
contained within <a href="https://github.com/NetCoreApps/AppleSignIn/blob/master/swift/MyApp/MyApp/ContentView.swift">ContentView.swift</a>.</p>
<h4 id="real-device-needed-to-test-sign-in-with-apple">Real device needed to test Sign in with Apple<a class="header-anchor" href="javascript:;" onclick="location.hash='#real-device-needed-to-test-sign-in-with-apple'" aria-label="Permalink">&ZeroWidthSpace;</a></h4>
<p>Whilst the iOS Simulator can run the rest of the App, a real device was needed to test the actual Sign in functionality
which otherwise hangs in the simulator which has been reported is due to 2FA which is required to use Sign in with Apple.</p>
<h3 id="enabling-sign-in-with-apple-capability">Enabling Sign In With Apple Capability<a class="header-anchor" href="javascript:;" onclick="location.hash='#enabling-sign-in-with-apple-capability'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>To enable Sign In functionality in your iOS App you'll need to add the <strong>Sign in with Apple</strong> capability in your App's <strong>Target</strong> &gt; <strong>Signing &amp; Capabilities</strong> window:</p>
<p><img src="/img/pages/dev/ios-swiftui-xcode-capability.png" alt="" /></p>
<h3 id="swiftui-layout">SwiftUI Layout<a class="header-anchor" href="javascript:;" onclick="location.hash='#swiftui-layout'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>SwiftUI's declarative API is able to expressively capture our UI in its different states within this code fragment
below:</p>
<pre><code class="language-swift">struct ContentView: View {
    @ObservedObject var vm = ViewModel()
    
    var body: some View {
         VStack {
            if !vm.hasInit {
                Text(&quot;Loading...&quot;)
            } else {
                Text(vm.result)
                Button(&quot;Go!&quot;) {
                    vm.doSecureRequest()
                }
                if let auth = vm.auth {
                    VStack {
                        Text(&quot;Hi \(auth.displayName ?? &quot;&quot;)&quot;)
                        if vm.authState != &quot;&quot; {
                            Text(&quot;authState: \(vm.authState)&quot;)
                                .foregroundColor(vm.authState == &quot;authorized&quot; ? .green : .primary)
                        }
                        Button(&quot;Sign Out&quot;) { vm.signOut() }
                    }
                } else {
                    AppleSignInButton()
                        .frame(width: 200, height: 50)
                        .onTapGesture {
                            self.vm.getRequest()
                        }
                }
            }
        }
    }
}

struct AppleSignInButton: UIViewRepresentable {
 func makeUIView(context: Context) -&gt; ASAuthorizationAppleIDButton {
  return ASAuthorizationAppleIDButton(
    authorizationButtonType: .signUp,
    authorizationButtonStyle: .white)
 }
 func updateUIView(_ uiView: ASAuthorizationAppleIDButton, context:Context) {}
}
</code></pre>
<p>Which for an initialized unauthenticated user will render the <strong>Go!</strong> button with a Sign in button:</p>
<p><img src="/img/pages/dev/ios-swiftui-home.png" alt="" /></p>
<p>The Sign in buttons UI is defined by <code>AppleSignInButton()</code> which is our wrapper around Apple's <code>ASAuthorizationAppleIDButton()</code> that allows for several customizations to change its appearance.
When the button is pressed it calls our ViewModel <code>getRequest()</code> method to initiate the Sign in request.</p>
<p><code>@ObservedObject</code> is one of SwiftUI's constructs for managing state, effectively it's the mechanism by which your App modifies to re-render its UI. A good article explaining the features and differences of each construct can be found in
<a href="https://purple.telstra.com/blog/swiftui---state-vs--stateobject-vs--observedobject-vs--environme">SwiftUI: @State vs @StateObject vs @ObservedObject vs @EnvironmentObject</a>.</p>
<p>Inside <code>getRequest()</code> we can see it's just calling <code>signInWithApple.getAppleRequest()</code> which is our custom controller
used to manage the Sign in request.</p>
<pre><code class="language-swift">class ViewModel: ObservableObject {
    private lazy var signInWithApple = SignInWithAppleCoordinator(vm:self)
    private lazy var client = createClient()
    
    func createClient() -&gt; JsonServiceClient {
        let client = JsonServiceClient(baseUrl: &quot;https://dev.servicestack.com:5001&quot;)
        client.ignoreCert = true
        return client
    }
    
    @Published var auth: AuthenticateResponse?
    var isAuthenticated:Bool { auth != nil }
    @Published var hasInit:Bool = false
    @Published var result:String = &quot;&quot;
    @Published var authState:String = &quot;&quot;
    
    func getRequest() {
        signInWithApple.getAppleRequest()
    }
    //....
}
</code></pre>
<p>The <code>SignInWithAppleCoordinator</code> uses the <code>ASAuthorizationController</code> to initiate the request and assigns itself as the <code>ASAuthorizationControllerDelegate</code> used to handle its success &amp; error callbacks:</p>
<pre><code class="language-swift">final class SignInWithAppleCoordinator : NSObject {
    let vm: ViewModel
    init(vm:ViewModel) {
        self.vm = vm
    }
    
    func getAppleRequest() {
        let appleIdProvider = ASAuthorizationAppleIDProvider()
        let request = appleIdProvider.createRequest()
        request.requestedScopes = [.fullName, .email]
        let authController = ASAuthorizationController(authorizationRequests: [request])
        authController.delegate = self
        authController.performRequests()
    }
    
    private func setUserInfo(for credential: ASAuthorizationAppleIDCredential) {
        ASAuthorizationAppleIDProvider().getCredentialState(forUserID: credential.user, completion: { 
          credentialState, error in
            var authState: String?
            switch credentialState {
            case .authorized: authState = &quot;authorized&quot;
            case .notFound: authState = &quot;notFound&quot;
            case .revoked: authState = &quot;revoked&quot;
            case .transferred: authState = &quot;transferred&quot;
            @unknown default: fatalError()
            }
            self.vm.setUser(credential:credential, authState:authState!)
        })
    }
}

extension SignInWithAppleCoordinator : ASAuthorizationControllerDelegate 
{    
    func authorizationController(controller: ASAuthorizationController, 
      didCompleteWithAuthorization authorization: ASAuthorization) {
        if let credential = authorization.credential as? ASAuthorizationAppleIDCredential {
            setUserInfo(for: credential)
        }
    }
    
    func authorizationController(controller: ASAuthorizationController, didCompleteWithError error: Error) {
        print(&quot;Sign In with Apple Error: \(error.localizedDescription)&quot;)
    }
}
</code></pre>
<p>The Sign in request is initiated with <code>authController.performRequests()</code> which on first usage launches a splash screen
explaining the benefits of <strong>Sign in with Apple</strong>:</p>
<p><img src="/img/pages/dev/ios-swiftui-signin-with-apple-splash.png" alt="" /></p>
<p>Then new users will be able to customize the name &amp; email they'll share with your App:</p>
<p><img src="/img/pages/dev/ios-swiftui-signin-with-apple-new-user.png" alt="" /></p>
<p>Upon successful authentication the <code>authorizationController</code> callback gets invoked with the users credentials captured
in the <code>ASAuthorizationAppleIDCredential</code> struct that eventually calls <code>setUser()</code> with both the authenticated <code>credential</code> and its <code>authState</code>.</p>
<p><code>setUser()</code> then uses the authorized <code>credential</code> to authenticate with our remote ServiceStack instance, passing
through the <code>givenName</code> and <code>familyName</code> that are only populated on a new Users initial Sign in request with the App.</p>
<pre><code class="language-swift">func setUser(credential: ASAuthorizationAppleIDCredential, authState: String) {
    
    DispatchQueue.main.async {
        self.authState = authState

        if authState == &quot;authorized&quot; {
            let request = Authenticate()
            request.provider = &quot;apple&quot;
            request.accessToken = String(decoding:credential.identityToken!, as: UTF8.self)
            request.meta = [
                &quot;authorizationCode&quot;: String(decoding:credential.authorizationCode!, as: UTF8.self),
                &quot;givenName&quot;: credential.fullName?.givenName ?? &quot;&quot;,
                &quot;familyName&quot;: credential.fullName?.familyName ?? &quot;&quot;,
            ]
            _ = self.client.postAsync(request)
                .done { r in
                    self.auth = r
                    UserDefaults.standard.set(r.toJson(), forKey: &quot;auth&quot;)
                    self.client.bearerToken = r.bearerToken
                    self.client.refreshToken = r.refreshToken
                }
                .catch { error in
                    let status:ResponseStatus = error.convertUserInfo()!
                    self.result = &quot;\(status.errorCode ?? &quot;&quot;): \(status.message ?? &quot;&quot;)&quot;
                }
        }
    }
}
</code></pre>
<p>Like the Flutter example, we save the JSON serialized <code>AuthenticateResponse</code> DTO to enable persistent Authentication
across App restarts and populate the <code>JsonServiceClient</code> with the JWT <code>bearerToken</code> and <code>refreshToken</code> to configure
the authenticated Service Client.</p>
<p>To Sign out the user we can use a new fresh client instance and remove any shared cookies that were created by
the previous client.</p>
<pre><code class="language-swift">func signOut() {
    DispatchQueue.main.async {
        self.auth = nil
        HTTPCookieStorage.shared.cookies?.forEach(HTTPCookieStorage.shared.deleteCookie)
        self.client = self.createClient()
    }
    UserDefaults.standard.removeObject(forKey: &quot;auth&quot;)
}
</code></pre>
<h3 id="loading-persistent-jwt-auth-tokens">Loading persistent JWT Auth Tokens<a class="header-anchor" href="javascript:;" onclick="location.hash='#loading-persistent-jwt-auth-tokens'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>Which is restored on App start and verified the JWT Token is still valid by calling the <code>Authenticate</code> Service
with an empty DTO which returns if Authenticated otherwise throws a <strong>401 Unauthorized</strong> Error if they're not.</p>
<pre><code class="language-swift">class ViewModel: ObservableObject {
  init() { load() }
  //...

  func load() {
      if let authJson = UserDefaults.standard.string(forKey: &quot;auth&quot;),
          let auth = AuthenticateResponse.fromJson(authJson) {
          client.bearerToken = auth.bearerToken
          client.refreshToken = auth.refreshToken
          client.postAsync(Authenticate())
              .done { r in
                  self.auth = auth
              }
              .catch { error in
                  self.client.bearerToken = nil
                  self.client.refreshToken = nil
                  UserDefaults.standard.removeObject(forKey: &quot;auth&quot;)
              }
              .finally {
                  self.hasInit = true
              }
      } else {
          self.hasInit = true
      }
  }
}
</code></pre>
<h4 id="apple-recommends-maintaining-auth-tokens-in-keychain">Apple recommends maintaining Auth tokens in Keychain<a class="header-anchor" href="javascript:;" onclick="location.hash='#apple-recommends-maintaining-auth-tokens-in-keychain'" aria-label="Permalink">&ZeroWidthSpace;</a></h4>
<p>Whilst this example uses <code>UserDefaults</code>, Apple's recommendation is to instead <a href="https://developer.apple.com/documentation/authenticationservices/implementing_user_authentication_with_sign_in_with_apple#3546459">save auth tokens in the User's Keychain</a>.</p>
<h3 id="authenticated-requests">Authenticated Requests<a class="header-anchor" href="javascript:;" onclick="location.hash='#authenticated-requests'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>With our Service Client configured with our JWT Auth Tokens it can now be used to perform authenticated requests using
the generic <code>JsonServiceClient</code> to send typed Swift DTOs generated from the
<a href="/swift-add-servicestack-reference">Swift ServiceStack Reference</a> feature:</p>
<pre><code class="language-swift">func doSecureRequest() {
    self.result = &quot;&quot;
    DispatchQueue.main.async {
        let request = HelloSecure()
        request.name = &quot;SwiftUI&quot;
        _ = self.client.getAsync(request)
            .done { r in
                self.result = r.result ?? &quot;&quot;
            }
            .catch { error in
                let status:ResponseStatus = error.convertUserInfo()!
                self.result = &quot;\(status.errorCode ?? &quot;&quot;): \(status.message ?? &quot;&quot;)&quot;
            }
    }
}
</code></pre>
<p>Which when sent from an authenticated Service Client will result in the expected:</p>
<p><img src="/img/pages/dev/ios-swiftui-auth-request.jpeg" alt="" /></p>
<h3 id="advanced-configuration">Advanced Configuration<a class="header-anchor" href="javascript:;" onclick="location.hash='#advanced-configuration'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>As with ServiceStack's other <a href="/auth/authentication-and-authorization#oauth-providers">OAuth Providers</a>, the behavior of the <code>AppleAuthProvider</code> can be further customized with the below configuration, when registering the <code>AppleAuthProvider</code> or in your App's configured
<a href="/appsettings">App Settings</a>:</p>
<pre><code class="language-csharp">public class AppleAuthProvider
{
    // Apple Developer Membership Team ID
    // appsettings: oauth.apple.TeamId
    public string TeamId
    
    // Service ID
    // appsettings: oauth.apple.ClientId
    public string ClientId
        
    // Bundle ID
    // appsettings: oauth.apple.BundleId
    public string BundleId

    // The Private Key ID
    // appsettings: oauth.apple.KeyId
    public string KeyId
    
    // Path to .p8 Private Key 
    // appsettings: oauth.apple.KeyPath
    public string KeyPath

    // Base64 of .p8 Private Key bytes 
    // appsettings: oauth.apple.KeyBase64
    public string KeyBase64
    
    // .p8 Private Key bytes 
    public byte[] KeyBytes
    
    // Customize ClientSecret JWT
    public Func&lt;AppleAuthProvider, string&gt; ClientSecretFactory
    
    // When JWT Client Secret expires, defaults to Apple Max 6 Month Expiry 
    // default: 6 months in secs 
    // appsettings: oauth.apple.ClientSecretExpiry
    public TimeSpan ClientSecretExpiry
    
    // JSON list of Apple's public keys, defaults to fetching from https://appleid.apple.com/auth/keys
    // appsettings: oauth.apple.IssuerSigningKeysJson
    public string IssuerSigningKeysJson

    // Whether to cache private Key if loading from KeyPath, 
    // default: true
    // appsettings: oauth.apple.CacheKey
    public bool CacheKey

    // Whether to cache Apple's public keys
    // default: true
    // appsettings: oauth.apple.CacheKey
    public bool CacheIssuerSigningKeys

    // How long before re-validating Sign in RefreshToken, default: 1 day.
    // Set to null to disable RefreshToken validation.
    public TimeSpan? ValidateRefreshTokenExpiry

    // Custom DisplayName resolver function when not sent by Apple
    public Func&lt;IAuthSession,IAuthTokens, string&gt; ResolveUnknownDisplayName
}
</code></pre>
</div>

                <div class="not-prose"></div>
                
                    <div class="not-prose py-8">
                        <a class="text-slate-500 font-semibold hover:text-indigo-600 flex items-center" href="https://github.com/ServiceStack/docs.servicestack.net/blob/main/MyApp/_pages/auth/signin-with-apple.md" target="_blank" rel="noopener noreferrer">
                            Edit this page on GitHub<svg class="ml-1 inline-block w-4 h-4" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" data-v-1ed99556=""><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg>
                        </a>
                    </div>

                    <div class="not-prose my-20">
                                <nav class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 px-4 sm:px-0">
                                    <div class="-mt-px flex w-0 flex-1">
                                            <a href="/auth/api-key-authprovider" class="inline-flex items-center border-t-2 border-transparent pt-4 pr-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                <!-- Heroicon name: mini/arrow-long-left -->
                                                <svg class="mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M18 10a.75.75 0 01-.75.75H4.66l2.1 1.95a.75.75 0 11-1.02 1.1l-3.5-3.25a.75.75 0 010-1.1l3.5-3.25a.75.75 0 111.02 1.1l-2.1 1.95h12.59A.75.75 0 0118 10z" clip-rule="evenodd"></path>
                                                </svg>
                                                API Key AuthProvider
                                            </a>
                                    </div>
                                    <div class="hidden md:-mt-px md:flex"></div>
                                    <div class="-mt-px flex w-0 flex-1 justify-end">
                                            <a href="/auth/anti-forgery" class="inline-flex items-center border-t-2 border-transparent pt-4 pl-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                Anti Forgery
                                                <!-- Heroicon name: mini/arrow-long-right -->
                                                <svg class="ml-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z" clip-rule="evenodd"></path>
                                                </svg>
                                            </a>
                                    </div>
                                </nav>
                    </div>
            </div>
                
                <div class="docmap hidden 2xl:block flex-none w-64 pl-8 mr-8">
                    <div class="fixed bg-white dark:bg-black flex flex-col overflow-y-auto pt-10 px-8 pb-6" style="height:calc(100vh - 50px);">
                        <div>
                            <h5 class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-100">
                                On This Page
                            </h5>
                            <ul class="text-slate-700 text-sm leading-6">
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#sign-in-with-apple-requirements'" data-id="sign-in-with-apple-requirements" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Sign In with Apple Requirements
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="app-requirements-walkthrough" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#app-requirements-walkthrough'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            App Requirements Walkthrough
                                                        </span>
                                                    </li>
                                                    <li data-id="apple-services-id-configuration" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#apple-services-id-configuration'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Apple Services ID configuration
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#getting-started'" data-id="getting-started" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Getting Started
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="create-project-with-preferred-auth-configuration" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#create-project-with-preferred-auth-configuration'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Create project with preferred Auth Configuration
                                                        </span>
                                                    </li>
                                                    <li data-id="clone-working-client-server-project" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#clone-working-client-server-project'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Clone working Client &amp; Server Project
                                                        </span>
                                                    </li>
                                                    <li data-id="android-support" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#android-support'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Android Support
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#flutter-ios-android-app'" data-id="flutter-ios-android-app" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Flutter iOS &amp; Android App
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="sign_in_with_apple-package" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#sign_in_with_apple-package'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            sign_in_with_apple package
                                                        </span>
                                                    </li>
                                                    <li data-id="new-user-registration" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#new-user-registration'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            New User Registration
                                                        </span>
                                                    </li>
                                                    <li data-id="persistent-authenticated-sessions" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#persistent-authenticated-sessions'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Persistent Authenticated Sessions
                                                        </span>
                                                    </li>
                                                    <li data-id="authenticated-api-requests" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#authenticated-api-requests'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Authenticated API Requests
                                                        </span>
                                                    </li>
                                                    <li data-id="resetting-app-sign-in" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#resetting-app-sign-in'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Resetting App Sign in
                                                        </span>
                                                    </li>
                                                    <li data-id="flutter-android-sign_in_with_apple-requirements" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#flutter-android-sign_in_with_apple-requirements'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Flutter Android sign_in_with_apple requirements
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#swiftui-app'" data-id="swiftui-app" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            SwiftUI App
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="enabling-sign-in-with-apple-capability" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#enabling-sign-in-with-apple-capability'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Enabling Sign In With Apple Capability
                                                        </span>
                                                    </li>
                                                    <li data-id="swiftui-layout" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#swiftui-layout'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            SwiftUI Layout
                                                        </span>
                                                    </li>
                                                    <li data-id="loading-persistent-jwt-auth-tokens" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#loading-persistent-jwt-auth-tokens'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Loading persistent JWT Auth Tokens
                                                        </span>
                                                    </li>
                                                    <li data-id="authenticated-requests" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#authenticated-requests'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Authenticated Requests
                                                        </span>
                                                    </li>
                                                    <li data-id="advanced-configuration" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#advanced-configuration'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Advanced Configuration
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
        </div>
    </div>    
</div>

<script>
//doc instructions
if (document.querySelector('.hide-title')) {
    const el = document.querySelector('#doc section h1') 
    if (el) el.style.display='none'
}
</script>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"


    const App = {
        setup() {
            function nav(url) {
                window.open(url)
            }
            return { nav }
        }
    }
    
const Sidebar = {
    setup() {
        const open = ref(true)
        return { open }
    }
}

mount('#doc', App)
mount('#sidebar', Sidebar)
</script>

<script src="/lib/js/highlight.js"></script>
<script>hljs.highlightAll()</script>
<script src="/lib/js/lite-yt-embed.js"></script>
<script src="/mjs/docs.mjs" type="module"></script>


    </main>
</div>

<script type="module">
import { init } from "app.mjs"
init()
</script>





</body>
</html>