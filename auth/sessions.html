<!doctype html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7722718-13"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'UA-7722718-13');</script>
    
    <meta charset="utf-8"/>
    <meta name='date' content='2025-11-01T13:26:51.7286057Z'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="/img/logo.svg">
    <title>Sessions</title>
    <script>
    if (location.search === "?dark") localStorage.setItem('color-scheme','dark') 
    if (location.search === "?light") localStorage.removeItem('color-scheme') 
    const cls = document.querySelector('html').classList
    if (localStorage.getItem('color-scheme') === 'dark')
        cls.add('dark')
    else
        cls.remove('dark')
    </script>
    <style>html { scroll-padding-top: 5rem }</style>
    <link rel="stylesheet" href="/css/app.css">
    
    <script type="importmap">
{
    "imports": {
        "app.mjs": "/mjs/app.mjs",
        "vue": "/lib/mjs/vue.mjs",
        "@servicestack/client": "/lib/mjs/servicestack-client.mjs",
        "@servicestack/vue": "/lib/mjs/servicestack-vue.mjs"
    }
}
</script>
</head>
<body class="bg-white dark:bg-black dark:text-white">

<header id="header" class="top-0 fixed z-50 h-14 bg-white dark:bg-black opacity-90 w-full shadow">
  <nav class="border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-black">
    <div class="mx-auto max-w-[100rem] pr-4 sm:pr-6 lg:pr-8">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="flex flex-shrink-0 items-center">
            <a class="mr-2 lg:mr-8 flex items-center" href="/">
                <svg class="w-8 h-8 sm:ml-2 sm:w-12 sm:h-12" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M10 6c1.544 1.76 2.276 4.15 2.217 6.61c3.968 1.67 9.924 6.12 11.181 12.39H28C26.051 14.31 14.918 6.77 10 6zm-2 7c4.67 4.913.81 11.582-4 12h18.97C21.5 18.289 11.95 13.533 8 13z"/></svg>
                <span class="hidden sm:block text-2xl font-semibold">Documentation</span>
            </a>
          </div>
            <div class="hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-4 lg:space-x-8">
                <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
                        <a href="/templates/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            <span class="hidden xl:inline mr-1">Project</span> Templates
                        </a>
                        <a href="/vue/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Vue
                        </a>
                        <a href="/autoquery/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            AutoQuery
                        </a>
                        <a href="/auth/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-indigo-500 text-gray-900">
                            Auth
                        </a>
                        <a href="/ormlite/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            OrmLite
                        </a>
                        <a href="/redis/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Redis
                        </a>
                        <a href="/locode/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            Locode
                        </a>
                        <a href="/grpc/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            gRPC
                        </a>
                        <a href="/ai-server/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            AI Server
                        </a>
            </div>
        </div>
        <div class="hidden sm:ml-6 sm:flex sm:items-center">
            <typesense></typesense>
            <dark-mode-toggle class="ml-2 w-10"></dark-mode-toggle>
        </div>
        <div class="-mr-2 flex items-center sm:hidden">
          <!-- Mobile menu button -->
          <button type="button" v-on:click="open=!open" class="inline-flex items-center justify-center rounded-md bg-white dark:bg-black p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:ring-offset-black" aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <!-- Menu open: "hidden", Menu closed: "block" -->
            <svg :class="['h-6 w-6', open ? 'hidden' : 'block']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
            <!-- Menu open: "block", Menu closed: "hidden" -->
            <svg :class="['h-6 w-6', open ? 'block' : 'hidden']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div v-cloak v-if="open" class="sm:hidden">
        <div class="space-y-1 pb-3 pt-2">
            <!-- Current: "border-indigo-500 bg-indigo-50 text-indigo-700", Default: "border-transparent text-gray-600 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-800" -->
                    <a href="/templates/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Project Templates
                    </a>
                    <a href="/vue/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Vue
                    </a>
                    <a href="/autoquery/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        AutoQuery
                    </a>
                    <a href="/auth/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-indigo-500 bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200">
                        Auth
                    </a>
                    <a href="/ormlite/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        OrmLite
                    </a>
                    <a href="/redis/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Redis
                    </a>
                    <a href="/locode/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Locode
                    </a>
                    <a href="/grpc/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        gRPC
                    </a>
                    <a href="/ai-server/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        AI Server
                    </a>
        </div>
    </div>
  </nav>
</header>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"

const Header = {
    setup() {
        const open = ref(false)
        return { open }
    }
}
mount('#header', Header)
</script>


<div class="min-h-screen">
    <main role="main" class="pt-16 pb-3 max-w-[100rem] mx-auto">
        



<style>
.active {
    color: #0ea5e9 !important;
}
</style>
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/typography.css">
<link rel="stylesheet" href="/css/lite-yt-embed.css">

<div class="w-full max-w-[100rem] mx-auto">
    <div class="flex flex-wrap">
        <div id="sidebar" class="z-40 inset-0 flex-none bg-white dark:bg-black lg:w-64 xl:w-80">
            <button v-cloak v-on:click="open=true" :class="['text-gray-400 hover:text-gray-500 pt-4 pl-2 absolute transform transition-all duration-200', open ? 'opacity-0 translate-x-56' : 'opacity-100']" title="Open Sidebar">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H10m10 0l-4 4m4-4l-4-4M4 4v16"/></svg>
            </button>
            <div :class="['fixed bg-white dark:bg-black h-screen overflow-y-auto scrolling-touch overflow-hidden shadow lg:shadow-none transform transition-transform duration-200', open ? '' : 'translate-x-[-100%]']">
                <nav class="sidebar lg:w-64 xl:w-80 px-1 pt-6 pb-16 overflow-y-auto font-medium text-sm lg:text-base sm:px-3 xl:px-5" aria-label="Sidebar">
                    <close-button title="Close Sidebar" class="lg:hidden -mr-2" v-on:close="open=false"></close-button>
                                <a href="/auth/" class="block flex items-center whitespace-nowrap">
<svg class='h-6 w-6 shrink-0 text-sky-500' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' aria-hidden='true'><path stroke-linecap='round' stroke-linejoin='round' d='M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25'></path></svg>                                    <span class="p-2 pl-3 font-display font-medium text-slate-900 dark:text-white">
Auth                                    </span>
                                </a>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/auth/client-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Client Authentication
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/restricting-services" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Restricting Services
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/encrypted-messaging" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Encrypted Messaging
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    ASP.NET Core Identity Auth
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/auth/identity-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Overview
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/jwt-identity-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        JWT Identity Auth
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/apikeys" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        API Keys
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/admin-apikeys" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Simple Admin Auth with API Keys
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/migrate-to-identity-auth" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Migrate to Identity Auth
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/identityserver" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Using IdentityServer4 Auth
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    ServiceStack Auth
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/auth/authentication-and-authorization" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Overview
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/auth-repository" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Auth Repository
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/identity-servicestack" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Using ServiceStack Auth in MVC
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/sessions" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full active font-semibold text-sky-500 before:bg-sky-500">
                                        Sessions
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/jwt-authprovider" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        JWT AuthProvider
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/api-key-authprovider" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        API Key AuthProvider
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/signin-with-apple" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Sign in with Apple AuthProvider
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/auth/anti-forgery" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Anti Forgery
                                    </a>
                                </li>
                        </ul>
                </nav>
            </div>
        </div>
        <div id="doc" class="mx-auto flex">
            <div class="mt-8 mx-auto prose lg:prose-lg">
                
                    <section class="not-prose mb-16 md:mb-12">
                        <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 dark:text-gray-50 sm:text-5xl md:text-6xl">
                            Sessions
                        </h1>
                    </section>

                <div class="not-prose"></div>

                <div class="content"><p>The <code>AuthFeature</code> (plugin) already enables the SessionFeature, but if you want to make use of sessions and don't want to enable the built-in <a href="/auth/authentication-and-authorization">Authentication</a>, you will need to register it manually in your AppHost with:</p>
<pre><code class="language-csharp">public override void Configure(Container container)
{
    Plugins.Add(new SessionFeature());
}
</code></pre>
<h2 id="cookie-session-ids">Cookie Session Ids<a class="header-anchor" href="javascript:;" onclick="location.hash='#cookie-session-ids'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>When the <code>SessionFeature</code> is enabled, a <a href="/request-and-response-filters">Global RequestFilter</a> is added to ServiceStack to ensure that all requests have a Temporary <code>ss-id</code> and a Permanent <code>ss-pid</code> session cookies set. These Session Cookies contain a unique Random Base64-encoded Id. The <code>ss-opt</code> cookie stores the users preference on whether they want their current session to be temporary (<code>ss-opt=temp</code>) or permanent (<code>ss-opt=perm</code>) - i.e. to <strong>RememberMe</strong> or not - The Default is Temporary.</p>
<h2 id="permanent-and-temporary-session-ids">Permanent and Temporary Session Ids<a class="header-anchor" href="javascript:;" onclick="location.hash='#permanent-and-temporary-session-ids'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>The Permanent session cookie <code>ss-pid</code> is always created even if <code>ss-opt</code> is Temporary - this allows you to link and track subsequent requests together which can be helpful for user request analyzing. In contrast the temporary Session Id <code>ss-id</code> uses a temporary cookie that does not persist across a users browser sessions.</p>
<p>If you're interested in the implementation, all the source code for ServiceStack's Sessions are kept in the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Caching/ISession.cs">ISession</a>, <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/SessionFeature.cs">SessionFeature</a>, <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/SessionFactory.cs">SessionFactory</a>, <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/SessionExtensions.cs">SessionExtensions</a> and <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/ServiceExtensions.cs">ServiceExtensions</a> classes.</p>
<h2 id="can-be-used-with-any-icacheclient">Can be used with any ICacheClient<a class="header-anchor" href="javascript:;" onclick="location.hash='#can-be-used-with-any-icacheclient'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>ServiceStack's implementation of Sessions are clean, in that they work with all of <a href="/caching">ServiceStack's Caching Providers</a> and are simply pointers to POCOs in your Cache.</p>
<h3 id="formatting-of-keys-used-in-cache-providers">Formatting of Keys used in Cache Providers<a class="header-anchor" href="javascript:;" onclick="location.hash='#formatting-of-keys-used-in-cache-providers'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>For typed or Custom AuthSession the key is:</p>
<pre><code>urn:iauthsession:{sessionId}
</code></pre>
<p>When using un-typed <strong>Session Bag</strong> the key is:</p>
<pre><code>sess:{sessionId}:{key}
</code></pre>
<p>The general recommendation is to use typed sessions, which will give you type-safety benefits as well as being able to fetch your entire users session with a single cache call. If you use the dynamic/session bag then it will be a network call for each key accessed - although as caches are designed for fast-access, this isn't too much of a concern.</p>
<p>In code <code>IRequest.GetSessionId()</code> returns the right <code>ss-id/ss-pid</code> for that request so you can programmatically access the session key and session for a request directly from the registered cache with:</p>
<pre><code class="language-csharp">var sessionKey = SessionFeature.GetSessionKey(httpReq.GetSessionId());
var session = await httpReq.GetCacheClientAsync().GetAsync&lt;IAuthSession&gt;(sessionKey);
</code></pre>
<h2 id="auth-with-request-authproviders">Auth with Request AuthProviders<a class="header-anchor" href="javascript:;" onclick="location.hash='#auth-with-request-authproviders'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Auth Providers that authenticate with each request that implement <code>IAuthWithRequest</code> like <a href="/auth/jwt-authprovider">JWT</a>, <a href="/auth/api-key-authprovider">API Key</a> and <code>BasicAuthProvider</code> don't persist Users Sessions in the cache, they're only in the <code>IRequest</code> and only last for the duration of the Request.</p>
<h3 id="overriding-a-user-session">Overriding a User Session<a class="header-anchor" href="javascript:;" onclick="location.hash='#overriding-a-user-session'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>This alternative solution for populating a Users Session on each request can be utilized by injecting an authenticated UserSession in:</p>
<pre><code class="language-csharp">IRequest req = base.Request;
req.Items[Keywords.Session] = usersSession;
</code></pre>
<h2 id="using-typed-sessions-in-servicestack">Using Typed Sessions in ServiceStack<a class="header-anchor" href="javascript:;" onclick="location.hash='#using-typed-sessions-in-servicestack'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>An example of using Typed Sessions is in the <a href="https://github.com/ServiceStack/SocialBootstrapApi">Social Bootstrap Api</a> demo where a <a href="https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Models/CustomUserSession.cs">CustomUserSession</a> is defined as:</p>
<pre><code class="language-csharp">[DataContract]
public class CustomUserSession : AuthUserSession 
{
    [DataMember]
    public string CustomId { get; set; }
}
</code></pre>
<p>By inheriting <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/AuthUserSession.cs">AuthUserSession</a> you're able to keep all the users session together in 1 POCO, which allows you to access everything in 1 cache read or write.</p>
<div class="info custom-block">
            <p class="custom-block-title">INFO</p><p>When inheriting from <code>AuthUserSession</code> you will need to annotate your properties with <code>[DataMember]</code> as AuthUserSession is a DataContract class</p>
</div>
<div class="info custom-block">
            <p class="custom-block-title">INFO</p><p>When using JWT and <code>UseTokenCookie</code>, sessions are not saved in cache, instead they are encapsulated in the stateless <code>ss-tok</code> cookie. JWT only keeps data essential to authentication, any additional data should be resolved only as needed. Custom claims can be added using <code>PopulateSessionFilter</code>/<code>CreatePayloadFilter</code>. See <a href="/auth/jwt-authprovider#limit-to-essential-info">JWT docs</a> for more info</p>
</div>
<p>To tell ServiceStack to use your Custom Typed Session instead, register it in the <code>AuthFeature</code> plugin:</p>
<pre><code class="language-csharp">Plugins.Add(new AuthFeature(() =&gt; new CustomUserSession(), ...));
</code></pre>
<h2 id="session-events">Session events<a class="header-anchor" href="javascript:;" onclick="location.hash='#session-events'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Inheriting from the AuthUserSession also lets you add custom logic for different events in the User Session life-cycle:</p>
<pre><code class="language-csharp">// Fired when a new Session is created
void OnCreated(IRequest httpReq) {}

// Called after new sessions are hydrated, can be used to populate session with more info at runtime
void OnLoad(IRequest httpReq) {}

// Called when the user is registered or on the first OAuth login
void OnRegistered(IRequest httpReq, IAuthSession session, IServiceBase service) {}

// Called after the user has successfully authenticated
void OnAuthenticated(IServiceBase authService, IAuthSession session, IAuthTokens tokens, 
    Dictionary&lt;string, string&gt; authInfo) {}

// Fired before the session is removed after the /auth/logout Service is called
void OnLogout(IServiceBase authService) {}

// Override with Custom Validation logic to Assert if User is allowed to Authenticate. 
// Returning a non-null response invalidates Authentication with IHttpResult response returned to client.
IHttpResult Validate(IServiceBase authService, IAuthSession session, 
    IAuthTokens tokens, Dictionary&lt;string, string&gt; authInfo);
</code></pre>
<h3 id="auth-events">Auth Events<a class="header-anchor" href="javascript:;" onclick="location.hash='#auth-events'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The same authentication hooks that are available in the Custom UserSession above are also available in <code>IAuthEvents</code> API:</p>
<pre><code class="language-csharp">public interface IAuthEvents
{
    void OnRegistered(IRequest req, IAuthSession session, IServiceBase registerService);
    void OnAuthenticated(IRequest req, IAuthSession session, IServiceBase authService, 
        IAuthTokens tokens, Dictionary&lt;string, string&gt; authInfo);
    void OnLogout(IRequest req, IAuthSession session, IServiceBase authService);
    void OnCreated(IRequest req, IAuthSession session);
}
</code></pre>
<p>The new AuthEvents API provide a loose-typed way where plugins can tap into the same hooks by registering it with <code>AuthFeature.AuthEvents</code>, e.g:</p>
<pre><code class="language-csharp">public class WebSudoFeature : IPlugin, IAuthEvents
{
    public void Register(IAppHost appHost)
    {
        ...
        var authFeature = appHost.GetPlugin&lt;AuthFeature&gt;();
        authFeature.AuthEvents.Add(this);
    }

    // Add implementations of all `IAuthEvents` handlers
    public void OnCreated(IRequest httpReq, IAuthSession session) { ... }
}
</code></pre>
<p>An alternative way for accessing <code>IAuthEvents</code> is to register it like a normal dependency, e.g:</p>
<pre><code class="language-csharp">container.RegisterAs&lt;LogAuthEvents,IAuthEvents&gt;();
</code></pre>
<p>To simplify custom implementations you can inherit from the empty concrete <a href="https://github.com/ServiceStack/ServiceStack/blob/7eb3a34a2e545a54c2591665328c16c5d398d37a/src/ServiceStack/Auth/AuthEvents.cs#L18-L25">AuthEvents</a> and choose to only implement the callbacks you're interested in, e.g:</p>
<pre><code class="language-csharp">public class LogAuthEvents : AuthEvents
{
    public static ILog Log = LogManager.GetLogger(typeof(LogAuthEvents));

    public override void OnLogout(IRequest httpReq, IAuthSession session, IServiceBase authService) 
    {
        Log.DebugFormat(&quot;User #{0} {1} has logged out&quot;, session.UserAuthId, session.UserName);
    }
}
</code></pre>
<h2 id="usersession-validation">UserSession validation<a class="header-anchor" href="javascript:;" onclick="location.hash='#usersession-validation'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Custom User Sessions can override <code>AuthUserSession.Validate()</code> to add additional logic for validating whether to allow a User to Authenticate, e.g:</p>
<pre><code class="language-csharp">public class CustomUserSession : AuthUserSession
{
    public override IHttpResult Validate(IServiceBase authService, IAuthSession session, 
        IAuthTokens tokens, Dictionary&lt;string, string&gt; authInfo)
    {
        if (!ValidateEmail(session.Email))
            return HttpError.BadRequest($&quot;{nameof(session.Email)} is invalid&quot;) as IHttpResult;
        
        return null;
    }
}
</code></pre>
<p>Returning any <code>IHttpResult</code> will cause Authentication to fail with the returned <code>IHttpResult</code> written to the response.</p>
<h2 id="accessing-typed-session">Accessing Typed Session<a class="header-anchor" href="javascript:;" onclick="location.hash='#accessing-typed-session'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>You can access your custom UserAuth session inside your service using the <code>SesssionAs&lt;T&gt;()</code> extension method, e.g:</p>
<pre><code class="language-csharp">public abstract class MyService : Service 
{
    public object Get(MyRequest request)
    {
        var typedSession = this.SessionAs&lt;CustomUserSession&gt;();
    }
}
</code></pre>
<h2 id="adding-a-convenience-wrapper">Adding a Convenience wrapper<a class="header-anchor" href="javascript:;" onclick="location.hash='#adding-a-convenience-wrapper'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>To provide a typed, Convenient API for your service you can add the following to a base class, here's SocialBootstrapApi's <a href="https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/ServiceInterface/AppServiceBase.cs">AppServiceBase</a> example:</p>
<pre><code class="language-csharp">public abstract class AppServiceBase : Service {
    private CustomUserSession userSession;
    protected CustomUserSession UserSession {
        get {
            return base.SessionAs&lt;CustomUserSession&gt;();
        }
    }
}
</code></pre>
<p>This will then enable you to access your users Session in your ServiceStack services with <code>base.UserSession</code>.</p>
<h2 id="cookie-filters">Cookie Filters<a class="header-anchor" href="javascript:;" onclick="location.hash='#cookie-filters'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Customization of Cookies can be enabled by overriding the host-specific methods in your <code>AppHost</code>:</p>
<pre><code class="language-csharp">//ASP.NET Core
public override void CookieOptionsFilter(Cookie cookie, Microsoft.AspNetCore.Http.CookieOptions cookieOptions) {}

//Classic ASP.NET
public override void HttpCookieFilter(HttpCookie cookie) {}
</code></pre>
<h2 id="enable-same-site-cookies">Enable Same Site Cookies<a class="header-anchor" href="javascript:;" onclick="location.hash='#enable-same-site-cookies'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p><a href="https://www.sjoerdlangkemper.nl/2016/04/14/preventing-csrf-with-samesite-cookie-attribute/">Same Site Cookies</a> are a good default to use
in your Apps which restricts cookies from being sent cross-site in order to prevent against cross-site request forgery (CSRF) attacks.</p>
<p>It can be configured in your <code>AppHost</code> with:</p>
<pre><code class="language-csharp">SetConfig(new HostConfig
{
    UseSameSiteCookies = true
});
</code></pre>
<p>This restriction will prevent features reliant on cross-site cookies from working so you'll need to verify it's safe to enable in your Apps.
This restriction works with most Auth Providers except for <code>TwitterAuthProvider</code> who doesn't yet support the OAuth <code>state</code> callback that
could be used instead of Session cookies.</p>
<h2 id="secure-cookies-enabled-by-default">Secure Cookies enabled by default<a class="header-anchor" href="javascript:;" onclick="location.hash='#secure-cookies-enabled-by-default'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Secure_cookie">Secure Cookies</a> ensure that Cookies added over HTTPS are only resent in subsequent secure connections.</p>
<p>They're <strong>enabled by default</strong> for <strong>Cookies added over SSL</strong>, they can be disabled with:</p>
<pre><code class="language-csharp">Plugins.Add(new HostConfig {
    UseSecureCookies = false
});
</code></pre>
<h2 id="sharing-servicestacks-typed-sessions-in-mvc-and-asp.net">Sharing ServiceStack's Typed Sessions in MVC and ASP.NET<a class="header-anchor" href="javascript:;" onclick="location.hash='#sharing-servicestacks-typed-sessions-in-mvc-and-asp.net'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>ASP.NET's Session Provider model still maintains its old legacy .NET 1.0 roots with it's heavy XML-encumbered config model, it's coupled and un-testable API, and its <a href="http://stackoverflow.com/questions/3629709/i-just-discovered-why-all-asp-net-websites-are-slow-and-i-am-trying-to-work-out">degrading performance limitations by design</a> makes it difficult for any web service framework to share the same User Sessions with the base ASP.NET Web Forms or MVC web host.</p>
<p>ServiceStack gets around these limitations by providing its own de-coupled, testable and dependency-free <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Caching/ICacheClient.cs">ICacheClient</a> and <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Caching/ISession.cs">ISession</a> APIs - which all work simply together as they're just plain Guid Session Keys stored in Caches pointing to POCOs.</p>
<p>The method SessionFeature.GetSessionKey allows you to get a Session Key for a current request if you are trying to access it in ASP.NET Web Forms or MVC web host. Using a Session Key you can have a full control over Session object:</p>
<pre><code class="language-csharp">// CacheClient is instance of ICacheClient

var sessionKey = SessionFeature.GetSessionKey();

// getting an existing User Session or create a new one 
var userSession = SessionFeature.GetOrCreateSession&lt;AuthUserSession&gt;(CacheClient); 
// or SessionFeature.GetOrCreateSession&lt;CustomUserSession&gt;(CacheClient); 
</code></pre>
<h2 id="saving-in-service">Saving in Service<a class="header-anchor" href="javascript:;" onclick="location.hash='#saving-in-service'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>As a typed session is just a disconnected POCO, it needs to explicitly saved to be persisted - which you can do with the <a href="https://github.com/ServiceStack/ServiceStack/blob/6ac4bd1842c170f1569bb5aa1020a37c7bb4017d/src/ServiceStack/ServiceExtensions.cs#L73">base.SaveSession()</a> Extension method.</p>
<pre><code class="language-csharp">public async Task&lt;object&gt; Any(Request request)
{
    var session = await base.SessionAsAsync&lt;AuthUserSession&gt;();

    // modify session

    await base.Request.SaveSessionAsync(session);
}
</code></pre>
<h2 id="saving-outside-a-service">Saving outside a Service<a class="header-anchor" href="javascript:;" onclick="location.hash='#saving-outside-a-service'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>If your logic is outside a ServiceStack service you can save your typed session by getting access to the ServiceStack <code>IRequest</code> which you can create from ASP.NET Request objects:</p>
<pre><code class="language-csharp">IHttpRequest httpReq = aspCtx.ToRequest(); //HttpContext
IHttpRequest httpReq = aspReq.ToRequest(); //MVC HttpRequestBase
IHttpRequest httpReq = netCoreCtx.ToRequest(); //.NET Core HttpContext
IHttpRequest httpReq = listenerCtx.ToRequest(); //HttpListenerContext

//In ASP.NET hosts via the singleton
IHttpRequest httpReq = HostContext.AppHost.TryGetCurrentRequest(); 
</code></pre>
<p>Once you have access to the current <code>IRequest</code> you can save your typed session using the <code>SaveSessionAsync()</code> extension method:</p>
<pre><code class="language-csharp">await httpReq.SaveSessionAsync(session);
</code></pre>
<p>This API is also available in MVC Controllers that inherit <code>ServiceStackController</code> or ASP.NET Pages that inherit <code>ServiceStackPage</code>:</p>
<pre><code class="language-csharp">await base.SaveSessionAsync(session);
</code></pre>
<h2 id="intercept-saving-sessions">Intercept Saving Sessions<a class="header-anchor" href="javascript:;" onclick="location.hash='#intercept-saving-sessions'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Each time the Session is saved it's saved again with the default Session Expiry which can be specified on the top-level <code>AuthFeature.SessionExpiry</code> for temp Sessions or <code>AuthFeature.PermanentSessionExpiry</code> for permanent &quot;Remember Me&quot; Sessions.</p>
<p>For fine-grained control you can intercept each time a Session is saved and change what Session Expiry it's saved with by overriding <code>OnSaveSessionAsync</code> in your AppHost:</p>
<pre><code class="language-csharp">public override Task OnSaveSessionAsync(
    IRequest httpReq, IAuthSession session, TimeSpan? expiresIn = null, CancellationToken token=default)
{
    var customExpiry = ...
    base.OnSaveSessionAsync(httpReq, session, customExpiry, token);
}
</code></pre>
<h2 id="sliding-sessions">Sliding Sessions<a class="header-anchor" href="javascript:;" onclick="location.hash='#sliding-sessions'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>You can extend existing User Sessions in ServiceStack by just re-saving the Users Session.
This can be done anywhere in <a href="/order-of-operations">ServiceStack's Request Pipeline</a>, E.g.
in a <a href="/filter-attributes">Request or Response Filter Attribute</a> or
<a href="/request-and-response-filters">Global Request or Response Filter</a>:</p>
<p>E.g. here's a Sliding Sessions example using a custom <code>[SlideExpiration]</code> Response Filter Attribute:</p>
<pre><code class="language-csharp">public class SlidingSessionAttribute : ResponseFilterAsyncAttribute
{
    public TimeSpan? Expiry { get; set; }

	public SlidingSessionAttribute(int expirySecs=0)
	{
		this.Expiry = expirySecs &lt;= 0
            ? (TimeSpan?)null 
            : TimeSpan.FromSeconds(expirySecs);
	}

    public override async Task ExecuteAsync(IRequest req, IResponse res, object response)
    {
        var session = await req.GetSessionAsync();
        if (session != null) 
            await req.SaveSessionAsync(session, this.Expiry);
    }
}
</code></pre>
<p>Which can be applied to any protected User Services, e.g:</p>
<pre><code class="language-csharp">[Authenticate]
[SlidingSession(10 * 60)] //= 10 minutes
public class UserServices : Service
{
    public object Any(MyUserRequest request) =&gt; ...;
}
</code></pre>
<p>Which just re-saves the Session in order to extend it with a new Session Expiry, this can
instead be done in a Global Response Filter with:</p>
<pre><code class="language-csharp">GlobalResponseFiltersAsync.Add(async (req, res, dto) =&gt; {
    var session = await req.GetSessionAsync();
    if (session != null)
        await req.SaveSessionAsync(session, TimeSpan.FromMinutes(10));
});
</code></pre>
<h3 id="find-the-remaining-time-left-before-a-session-expires">Find the remaining time left before a Session expires<a class="header-anchor" href="javascript:;" onclick="location.hash='#find-the-remaining-time-left-before-a-session-expires'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>For <a href="/">Cache Clients</a> that implement you can retrieve the
<code>ICacheClientExtended.GetTimeToLive()</code> returns a <code>TimeSpan?</code> which will return:</p>
<ul>
<li><code>null</code> if no key exists</li>
<li><code>TimeSpan.MaxValue</code> if there is no expiry set on the key</li>
<li>or a <code>TimeSpan</code> value with the time remaining before the key is set to expire</li>
</ul>
<p>So you can determine the remaining time on a Session by querying the <strong>Time To Live</strong>
remaining on the Session Key in the Cache which you could use to extend the Users Session
by <strong>10 minutes</strong> if they have <strong>less than 10 minutes</strong> remaining:</p>
<pre><code class="language-csharp">var sessionId = req.GetSessionId(); 
var sessionKey = SessionFeature.GetSessionKey(sessionId);
var ttl = req.GetCacheClient().GetTimeToLive(sessionKey);

if (ttl != null &amp;&amp; ttl &lt;= TimeSpan.FromMinutes(10)) 
{
    var session = await req.GetSessionAsync();
    await req.SaveSessionAsync(session, TimeSpan.FromMinutes(10));
}
</code></pre>
<h2 id="typed-sessions-in-mvc">Typed Sessions in MVC<a class="header-anchor" href="javascript:;" onclick="location.hash='#typed-sessions-in-mvc'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>To make use of it in MVC, you effectively do the same thing, although this time you can simply inherit the existing <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Mvc/ServiceStackController.cs">ServiceStackController</a> which has the above templated code in a generic MVC Controller Template:</p>
<pre><code class="language-csharp">public class ControllerBase : ServiceStackController&lt;CustomUserSession&gt; {}
</code></pre>
<p>From there it's just a basic property which you can use in your Controller or assign to your views <a href="https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Controllers/HomeController.cs#L12">like this</a>:</p>
<pre><code class="language-csharp">public partial class HomeController : ControllerBase 
{
    public virtual ActionResult Index() 
    {
        ViewBag.Message = &quot;MVC + ServiceStack PowerPack!&quot;;
        ViewBag.UserSession = base.UserSession;
        return View();
    }   
}
</code></pre>
<h2 id="typed-sessions-in-asp.net-web-forms">Typed Sessions in ASP.NET Web Forms<a class="header-anchor" href="javascript:;" onclick="location.hash='#typed-sessions-in-asp.net-web-forms'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>It's the same thing in ASP.NET Web Forms although this comes in the form of a <a href="https://github.com/ServiceStack/ServiceStack/blob/master/NuGet/ServiceStack.Host.AspNet/content/App_Start/PageBase.cs.pp">base ASP.NET Web Page</a> which you get for free when you install ServiceStack via the <a href="http://nuget.org/packages/ServiceStack.Host.AspNet">ServiceStack.Host.AspNet</a> NuGet package.</p>
<h2 id="using-dynamic-untyped-sessions-in-session-bag">Using Dynamic / Untyped Sessions in Session Bag<a class="header-anchor" href="javascript:;" onclick="location.hash='#using-dynamic-untyped-sessions-in-session-bag'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>You can access the dynamic UserSession Bag in ServiceStack services via the <code>base.SessionBag</code> property already built-in ServiceStack's <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Service.cs">Service</a> base class, e.g:</p>
<pre><code class="language-csharp">await base.SessionBagAsync.SetAsync(&quot;cart&quot;, new Cart { ... });
var cart = await base.SessionBagAsync.GetAsync&lt;Cart&gt;(&quot;cart&quot;);
</code></pre>
<h2 id="use-http-headers-to-send-session-cookies">Use HTTP Headers to Send Session Cookies<a class="header-anchor" href="javascript:;" onclick="location.hash='#use-http-headers-to-send-session-cookies'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>You can now make a Session-enabled request with HTTP Headers instead of Cookies. The Session HTTP Headers have a <code>X-</code> prefix before the Session Id, i.e: <code>X-ss-id</code>, <code>X-ss-pid</code> and <code>X-ss-opts</code>.</p>
<h2 id="inspecting-persisted-user-sessions">Inspecting persisted User Sessions<a class="header-anchor" href="javascript:;" onclick="location.hash='#inspecting-persisted-user-sessions'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>ServiceStack Sessions are just serialized POCO's stored in the Registered <code>ICacheClient</code> at the following key:</p>
<pre><code>urn:iauthsession:{SessionId}
</code></pre>
<p>Where <code>{SessionId}</code> is either the users <code>ss-id</code> or <code>ss-pid</code> cookie depending on whether the user was authenticated with <code>RememberMe=true</code> which instructs ServiceStack to save the session against the <code>ss-pid</code> permanent cookie - this preference is stored in the <code>ss-opt=perm</code> cookie.</p>
<p>Since they're just plain POCO's stored at a predictable key format, we can easily iterate through all user sessions by using the <code>ICacheClient</code> API's directly, e.g:</p>
<pre><code class="language-csharp">var sessionPattern = IdUtils.CreateUrn&lt;IAuthSession&gt;(&quot;&quot;); //= urn:iauthsession:
var sessionKeys = Cache.GetKeysStartingWith(sessionPattern).ToList();

var allSessions = Cache.GetAll&lt;IAuthSession&gt;(sessionKeys);
</code></pre>
<h2 id="community-resources">Community Resources<a class="header-anchor" href="javascript:;" onclick="location.hash='#community-resources'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<ul>
<li><a href="http://teadriven.me.uk/2013/02/14/sliding-sessions-in-service-stack/">Sliding session expirations in ServiceStack</a> by <a href="https://twitter.com/teadriven">@teadriven</a></li>
<li><a href="http://www.richardfawcett.net/2012/02/29/accessing-asp-net-session-from-servicestack/">Accessing ASP.NET Session from ServiceStack</a> by <a href="https://twitter.com/yeurch">@yeurch</a></li>
<li><a href="https://web.archive.org/web/20121124003901/http://openlandscape.net/2011/03/21/rest-web-services-with-servicestack">REST Web Services with ServiceStack</a> by Jacques du Preez</li>
</ul>
</div>

                <div class="not-prose"></div>
                
                    <div class="not-prose py-8">
                        <a class="text-slate-500 font-semibold hover:text-indigo-600 flex items-center" href="https://github.com/ServiceStack/docs.servicestack.net/blob/main/MyApp/_pages/auth/sessions.md" target="_blank" rel="noopener noreferrer">
                            Edit this page on GitHub<svg class="ml-1 inline-block w-4 h-4" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" data-v-1ed99556=""><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg>
                        </a>
                    </div>

                    <div class="not-prose my-20">
                                <nav class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 px-4 sm:px-0">
                                    <div class="-mt-px flex w-0 flex-1">
                                            <a href="/auth/identity-servicestack" class="inline-flex items-center border-t-2 border-transparent pt-4 pr-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                <!-- Heroicon name: mini/arrow-long-left -->
                                                <svg class="mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M18 10a.75.75 0 01-.75.75H4.66l2.1 1.95a.75.75 0 11-1.02 1.1l-3.5-3.25a.75.75 0 010-1.1l3.5-3.25a.75.75 0 111.02 1.1l-2.1 1.95h12.59A.75.75 0 0118 10z" clip-rule="evenodd"></path>
                                                </svg>
                                                Using ServiceStack Auth in MVC
                                            </a>
                                    </div>
                                    <div class="hidden md:-mt-px md:flex"></div>
                                    <div class="-mt-px flex w-0 flex-1 justify-end">
                                            <a href="/auth/jwt-authprovider" class="inline-flex items-center border-t-2 border-transparent pt-4 pl-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                JWT AuthProvider
                                                <!-- Heroicon name: mini/arrow-long-right -->
                                                <svg class="ml-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z" clip-rule="evenodd"></path>
                                                </svg>
                                            </a>
                                    </div>
                                </nav>
                    </div>
            </div>
                
                <div class="docmap hidden 2xl:block flex-none w-64 pl-8 mr-8">
                    <div class="fixed bg-white dark:bg-black flex flex-col overflow-y-auto pt-10 px-8 pb-6" style="height:calc(100vh - 50px);">
                        <div>
                            <h5 class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-100">
                                On This Page
                            </h5>
                            <ul class="text-slate-700 text-sm leading-6">
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#cookie-session-ids'" data-id="cookie-session-ids" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Cookie Session Ids
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#permanent-and-temporary-session-ids'" data-id="permanent-and-temporary-session-ids" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Permanent and Temporary Session Ids
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#can-be-used-with-any-icacheclient'" data-id="can-be-used-with-any-icacheclient" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Can be used with any ICacheClient
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="formatting-of-keys-used-in-cache-providers" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#formatting-of-keys-used-in-cache-providers'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Formatting of Keys used in Cache Providers
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#auth-with-request-authproviders'" data-id="auth-with-request-authproviders" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Auth with Request AuthProviders
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="overriding-a-user-session" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#overriding-a-user-session'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Overriding a User Session
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#using-typed-sessions-in-servicestack'" data-id="using-typed-sessions-in-servicestack" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Using Typed Sessions in ServiceStack
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#session-events'" data-id="session-events" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Session events
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="auth-events" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#auth-events'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Auth Events
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#usersession-validation'" data-id="usersession-validation" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            UserSession validation
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#accessing-typed-session'" data-id="accessing-typed-session" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Accessing Typed Session
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#adding-a-convenience-wrapper'" data-id="adding-a-convenience-wrapper" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Adding a Convenience wrapper
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#cookie-filters'" data-id="cookie-filters" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Cookie Filters
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#enable-same-site-cookies'" data-id="enable-same-site-cookies" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Enable Same Site Cookies
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#secure-cookies-enabled-by-default'" data-id="secure-cookies-enabled-by-default" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Secure Cookies enabled by default
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#sharing-servicestacks-typed-sessions-in-mvc-and-asp.net'" data-id="sharing-servicestacks-typed-sessions-in-mvc-and-asp.net" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Sharing ServiceStack&#x27;s Typed Sessions in MVC and ASP.NET
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#saving-in-service'" data-id="saving-in-service" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Saving in Service
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#saving-outside-a-service'" data-id="saving-outside-a-service" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Saving outside a Service
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#intercept-saving-sessions'" data-id="intercept-saving-sessions" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Intercept Saving Sessions
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#sliding-sessions'" data-id="sliding-sessions" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Sliding Sessions
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="find-the-remaining-time-left-before-a-session-expires" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#find-the-remaining-time-left-before-a-session-expires'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Find the remaining time left before a Session expires
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#typed-sessions-in-mvc'" data-id="typed-sessions-in-mvc" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Typed Sessions in MVC
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#typed-sessions-in-asp.net-web-forms'" data-id="typed-sessions-in-asp.net-web-forms" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Typed Sessions in ASP.NET Web Forms
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#using-dynamic-untyped-sessions-in-session-bag'" data-id="using-dynamic-untyped-sessions-in-session-bag" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Using Dynamic / Untyped Sessions in Session Bag
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#use-http-headers-to-send-session-cookies'" data-id="use-http-headers-to-send-session-cookies" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Use HTTP Headers to Send Session Cookies
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#inspecting-persisted-user-sessions'" data-id="inspecting-persisted-user-sessions" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Inspecting persisted User Sessions
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#community-resources'" data-id="community-resources" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Community Resources
                                        </span>
                                    </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
        </div>
    </div>    
</div>

<script>
//doc instructions
if (document.querySelector('.hide-title')) {
    const el = document.querySelector('#doc section h1') 
    if (el) el.style.display='none'
}
</script>


<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"


    const App = {
        setup() {
            function nav(url) {
                window.open(url)
            }
            return { nav }
        }
    }
    
const Sidebar = {
    setup() {
        const open = ref(true)
        return { open }
    }
}

mount('#doc', App)
mount('#sidebar', Sidebar)
</script>

<script src="/lib/js/highlight.js"></script>
<script>hljs.highlightAll()</script>
<script src="/lib/js/lite-yt-embed.js"></script>
<script src="/mjs/docs.mjs" type="module"></script>


    </main>
</div>

<script type="module">
import { init } from "app.mjs"
init()
</script>





</body>
</html>