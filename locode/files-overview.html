<!doctype html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-7722718-13"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date()); gtag('config', 'UA-7722718-13');</script>
    
    <meta charset="utf-8"/>
    <meta name='date' content='2024-04-24T19:38:56.9964370Z'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="/img/logo.svg">
    <title>Managed Files Uploads</title>
    <script>
    if (location.search === "?dark") localStorage.setItem('color-scheme','dark') 
    if (location.search === "?light") localStorage.removeItem('color-scheme') 
    const cls = document.querySelector('html').classList
    if (localStorage.getItem('color-scheme') === 'dark')
        cls.add('dark')
    else
        cls.remove('dark')
    </script>
    <link rel="stylesheet" href="/css/app.css">
    

    <script async src="https://ga.jspm.io/npm:es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
{
    "imports": {
        "app.mjs": "/mjs/app.mjs",
        "vue": "/lib/mjs/vue.min.mjs",
        "@servicestack/client": "/lib/mjs/servicestack-client.min.mjs",
        "@servicestack/vue": "/lib/mjs/servicestack-vue.min.mjs"
    }
}
</script>
</head>
<body class="bg-white dark:bg-black dark:text-white">

<header id="header" class="top-0 fixed z-50 h-14 bg-white dark:bg-black opacity-90 w-full shadow">
  <nav class="border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-black">
    <div class="mx-auto max-w-[100rem] pr-4 sm:pr-6 lg:pr-8">
      <div class="flex h-16 justify-between">
        <div class="flex">
          <div class="flex flex-shrink-0 items-center">
            <a class="mr-2 lg:mr-8 flex items-center" href="/">
                <svg class="w-8 h-8 sm:ml-2 sm:w-12 sm:h-12" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path fill="currentColor" d="M10 6c1.544 1.76 2.276 4.15 2.217 6.61c3.968 1.67 9.924 6.12 11.181 12.39H28C26.051 14.31 14.918 6.77 10 6zm-2 7c4.67 4.913.81 11.582-4 12h18.97C21.5 18.289 11.95 13.533 8 13z"/></svg>
                <span class="hidden sm:block text-2xl font-semibold">Documentation</span>
            </a>
          </div>
            <div class="hidden sm:-my-px sm:ml-6 sm:flex sm:space-x-4 lg:space-x-8">
                <!-- Current: "border-indigo-500 text-gray-900", Default: "border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700" -->
                        <a href="/templates/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            <span class="hidden xl:inline mr-1">Project</span> Templates
                        </a>
                        <a href="/vue/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Vue
                        </a>
                        <a href="/autoquery/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            AutoQuery
                        </a>
                        <a href="/auth/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Auth
                        </a>
                        <a href="/ormlite/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            OrmLite
                        </a>
                        <a href="/redis/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200">
                            Redis
                        </a>
                        <a href="/locode/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-indigo-500 text-gray-900 hidden lg:inline-flex">
                            Locode
                        </a>
                        <a href="/grpc/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:hover:text-gray-200 hidden lg:inline-flex">
                            gRPC
                        </a>
            </div>
        </div>
        <div class="hidden sm:ml-6 sm:flex sm:items-center">
            <typesense></typesense>
            <dark-mode-toggle class="ml-2 w-10"></dark-mode-toggle>
        </div>
        <div class="-mr-2 flex items-center sm:hidden">
          <!-- Mobile menu button -->
          <button type="button" v-on:click="open=!open" class="inline-flex items-center justify-center rounded-md bg-white dark:bg-black p-2 text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:ring-offset-black" aria-controls="mobile-menu" aria-expanded="false">
            <span class="sr-only">Open main menu</span>
            <!-- Menu open: "hidden", Menu closed: "block" -->
            <svg :class="['h-6 w-6', open ? 'hidden' : 'block']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
            </svg>
            <!-- Menu open: "block", Menu closed: "hidden" -->
            <svg :class="['h-6 w-6', open ? 'block' : 'hidden']" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div v-cloak v-if="open" class="sm:hidden">
        <div class="space-y-1 pb-3 pt-2">
            <!-- Current: "border-indigo-500 bg-indigo-50 text-indigo-700", Default: "border-transparent text-gray-600 hover:border-gray-300 hover:bg-gray-50 hover:text-gray-800" -->
                    <a href="/templates/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Project Templates
                    </a>
                    <a href="/vue/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Vue
                    </a>
                    <a href="/autoquery/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        AutoQuery
                    </a>
                    <a href="/auth/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Auth
                    </a>
                    <a href="/ormlite/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        OrmLite
                    </a>
                    <a href="/redis/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        Redis
                    </a>
                    <a href="/locode/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-indigo-500 bg-indigo-50 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-200">
                        Locode
                    </a>
                    <a href="/grpc/" class="block border-l-4 py-2 pl-3 pr-4 text-base font-medium border-transparent text-gray-600 dark:text-gray-300 hover:border-gray-300 hover:bg-gray-50 dark:hover:bg-gray-900 hover:text-gray-800 dark:hover:text-gray-100">
                        gRPC
                    </a>
        </div>
    </div>
  </nav>
</header>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"

const Header = {
    setup() {
        const open = ref(false)
        return { open }
    }
}
mount('#header', Header)
</script>


<div class="min-h-screen">
    <main role="main" class="pt-16 pb-3 max-w-[100rem] mx-auto">
        



<style>
.active {
    color: #0ea5e9 !important;
}
</style>
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/typography.css">
<link rel="stylesheet" href="/css/lite-yt-embed.css">

<div class="w-full max-w-[100rem] mx-auto">
    <div class="flex flex-wrap">
        <div id="sidebar" class="z-40 inset-0 flex-none bg-white dark:bg-black lg:w-64 xl:w-80">
            <button v-cloak v-on:click="open=true" :class="['text-gray-400 hover:text-gray-500 pt-4 pl-2 absolute transform transition-all duration-200', open ? 'opacity-0 translate-x-56' : 'opacity-100']" title="Open Sidebar">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H10m10 0l-4 4m4-4l-4-4M4 4v16"/></svg>
            </button>
            <div :class="['fixed bg-white dark:bg-black h-screen overflow-y-auto scrolling-touch overflow-hidden shadow lg:shadow-none transform transition-transform duration-200', open ? '' : 'translate-x-[-100%]']">
                <nav class="sidebar lg:w-64 xl:w-80 px-1 pt-6 pb-16 overflow-y-auto font-medium text-sm lg:text-base sm:px-3 xl:px-5" aria-label="Sidebar">
                    <close-button title="Close Sidebar" class="lg:hidden -mr-2" v-on:close="open=false"></close-button>
                                <a href="/locode/" class="block flex items-center whitespace-nowrap">
<svg class='h-6 w-6 shrink-0 text-sky-500' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' aria-hidden='true'><path stroke-linecap='round' stroke-linejoin='round' d='M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25'></path></svg>                                    <span class="p-2 pl-3 font-display font-medium text-slate-900 dark:text-white">
Locode                                    </span>
                                </a>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/locode/database-first" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Database-First
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/code-first" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Code-First
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    C# Development Model
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/locode/declarative" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Declarative Attributes
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/programmatic" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Code Customizations
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/branding" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Branding &amp; Appearance
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/formatters" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Format Functions
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    Custom HTML/JS
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/locode/custom-overview" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Overview
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/custom-autoquerygrid" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Custom AutoQueryGrid
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/custom-forms" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Custom Forms
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/custom-components" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Custom Components
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    File Management
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/locode/files-overview" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full active font-semibold text-sky-500 before:bg-sky-500">
                                        Overview
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/files-blazor" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        File Blazor Demo
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/files-upload-filesystem" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        File System
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/files-upload-aws" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        AWS
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/files-upload-azure" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Azure
                                    </a>
                                </li>
                        </ul>
                                <h2 class="font-display font-medium text-slate-900 dark:text-white whitespace-nowrap">
                                    Features
                                </h2>
                        <ul role="list" class="mb-6 mt-2 ml-3 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200">
                                <li class="relative">
                                    <a href="/locode/auditing" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Auditing
                                    </a>
                                </li>
                                <li class="relative">
                                    <a href="/locode/advanced" class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300">
                                        Advanced
                                    </a>
                                </li>
                        </ul>
                </nav>
            </div>
        </div>
        <div id="doc" class="mx-auto flex">
            <div class="mt-8 mx-auto prose lg:prose-lg">
                
                    <section class="not-prose mb-16 md:mb-12">
                        <h1 class="text-4xl tracking-tight font-extrabold text-gray-900 dark:text-gray-50 sm:text-5xl md:text-6xl">
                            Managed Files Uploads
                        </h1>
                    </section>

                <div class="not-prose"></div>

                <div class="content"><p>The <code>FileUploadFeature</code> plugin is a high-level ServiceStack feature that allows you to configure multiple managed
file upload locations within the same App that you can declaratively bind to different APIs to use.</p>
<div class="py-8 max-w-7xl mx-auto px-4 sm:px-6">
    <lite-youtube class="w-full mx-4 my-4" width="560" height="315" videoid="5sd00MzHpaU" style="background-image: url('https://img.youtube.com/vi/5sd00MzHpaU/maxresdefault.jpg')"></lite-youtube>
</div>
<p>Upload Locations can be configured to use any of the supported
<a href="/virtual-file-system#writable-virtual-file-system">Writable Virtual File Systems</a> including:</p>
<ul>
<li><code>FileSystemVirtualFiles</code> - Hard-disk or Network Files and Directories from a specified directory</li>
<li><code>S3VirtualFiles</code> - Files stored on Amazon's S3 Managed File Storage in <a href="https://github.com/ServiceStack/ServiceStack.Aws#s3virtualfiles">ServiceStack.Aws</a></li>
<li><code>R2VirtualFiles</code> - Files stored on CloudFlare's R2 Managed File Storage in <a href="https://github.com/ServiceStack/ServiceStack.Aws#s3virtualfiles">ServiceStack.Aws</a></li>
<li><code>AzureBlobVirtualFiles</code> - Files stored on Azure's Managed Blob Storage in <a href="https://github.com/ServiceStack/ServiceStack.Azure">ServiceStack.Azure</a></li>
<li><code>GistVirtualFiles</code> - Files persisted to a GitHub Gist</li>
<li><code>MemoryVirtualFiles</code> - Temporary Virtual Files and Folders that last for the lifetime of the AppHost</li>
</ul>
<div class="tip custom-block">
            <p class="custom-block-title">TIP</p><p>Additional support for external file storages can be added by
<a href="/virtual-file-system#implementing-a-new-virtual-file-system">Implementing a new Virtual File System</a></p>
</div>
<p>Managed file uploads is a generic feature any ServiceStack HTTP API can use by declaratively annotating it on Request DTOs.
It's especially useful in <a href="/autoquery/crud">AutoQuery CRUD APIs</a> as it enables an easy way to populate a file path that can be stored along with
a table row without the uploaded files embedded in the database itself, taking up valuable RDBMS resources and significantly impacting its performance.</p>
<h2 id="basic-file-upload-example">Basic File Upload Example<a class="header-anchor" href="javascript:;" onclick="location.hash='#basic-file-upload-example'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>To demonstrate how to use the Managed File Uploads feature we'll look at handling the basic example of uploading files
to publicly accessible <code>/wwwroot</code> folder location. This is what the <a href="https://talent.locode.dev">talent.locode.dev</a> Demo
uses to handle profile image uploads for Contacts and Users in different locations in its
<a href="https://github.com/NetCoreApps/TalentBlazor/blob/main/TalentBlazor/Configure.AppHost.cs">Configure.AppHost.cs</a>:</p>
<pre><code class="language-csharp">.ConfigureServices((context, services) =&gt;
{
    // Configure ASP.NET Core IOC Dependencies
    var wwwrootVfs = new FileSystemVirtualFiles(context.HostingEnvironment.WebRootPath);
    services.AddPlugin(new FilesUploadFeature(
        new UploadLocation(&quot;profiles&quot;, wwwrootVfs, allowExtensions:FileExt.WebImages,
            resolvePath: ctx =&gt; $&quot;/profiles/{ctx.FileName}&quot;),
        new UploadLocation(&quot;users&quot;, wwwrootVfs, allowExtensions:FileExt.WebImages,
            resolvePath: ctx =&gt; $&quot;/profiles/users/{ctx.UserAuthId}.{ctx.FileExtension}&quot;),
        //...
    ));
});
</code></pre>
<p>As both locations are uploaded to the App's <code>/wwwroot</code> folder they'll be immediately accessible after they're uploaded.
Contact profile images are saved using their uploaded FileName whilst User profiles are saved in a predictable location
against their User Id and uploaded File Extension type.</p>
<p>The only default restriction placed on File Uploads is that they can only be performed by Authenticated Users.
Each <code>UploadLocation</code> is able to use the several configuration options available to further restrict file uploads
by file type, count, size, number of uploads or a custom validation function. In this instance Talent Blazor
is restricting uploads in <code>allowExtensions</code> to only Images supported by Browsers, which is a server validation that
also gets propagated to the client to limit the user to only be able to select from the server-configured file extensions:</p>
<p><img src="/img/pages/locode/talent/upload-accept.png" alt="" /></p>
<p>To simplify configuration
<a href="https://github.com/ServiceStack/ServiceStack/blob/main/ServiceStack/src/ServiceStack/FilesUploadFeature.cs">we've included</a>
a number of pre-configured file extensions for different file types.</p>
<pre><code class="language-csharp">public static class FileExt
{
    string[] WebImages = { &quot;png&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;gif&quot;, &quot;svg&quot;, &quot;webp&quot; };
    string[] BinaryImages = {&quot;png&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;gif&quot;, &quot;bmp&quot;, &quot;tif&quot;, &quot;tiff&quot;, &quot;webp&quot;, &quot;ai&quot;, &quot;psd&quot;,&quot;ps&quot;};
    string[] Images = WebImages.CombineDistinct(BinaryImages);
    string[] WebVideos = { &quot;avi&quot;, &quot;m4v&quot;, &quot;mov&quot;, &quot;mp4&quot;, &quot;mpg&quot;, &quot;mpeg&quot;, &quot;wmv&quot;, &quot;webm&quot; };
    string[] WebAudios = { &quot;mp3&quot;, &quot;mpa&quot;, &quot;ogg&quot;, &quot;wav&quot;, &quot;wma&quot;, &quot;mid&quot;, &quot;webm&quot; };
    string[] BinaryDocuments = { &quot;doc&quot;, &quot;docx&quot;, &quot;pdf&quot;, &quot;rtf&quot; };
    string[] TextDocuments = { &quot;tex&quot;, &quot;txt&quot;, &quot;md&quot;, &quot;rst&quot; };
    string[] Spreadsheets = { &quot;xls&quot;, &quot;xlsm&quot;, &quot;xlsx&quot;, &quot;ods&quot;, &quot;csv&quot;, &quot;txv&quot; };
    string[] Presentations = { &quot;key&quot;, &quot;odp&quot;, &quot;pps&quot;, &quot;ppt&quot;, &quot;pptx&quot; };
    string[] AllDocuments = BinaryDocuments.CombineDistinct(TextDocuments, Presentations, Spreadsheets);
    string[] WebFormats = WebImages.CombineDistinct(WebVideos, WebAudios);
}
</code></pre>
<h3 id="using-file-upload-locations-in-apis">Using File Upload Locations in APIs<a class="header-anchor" href="javascript:;" onclick="location.hash='#using-file-upload-locations-in-apis'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>With just the above configuration we can now use them in our APIs, which Talent Blazor does in its <code>CreateContact</code>
and <code>UpdateContact</code> <a href="/autoquery/crud">CRUD APIs</a> to handle uploading a contact profiles image
when they're Created and Updated:</p>
<pre><code class="language-csharp">public class CreateContact : ICreateDb&lt;Contact&gt;, IReturn&lt;Contact&gt;
{
    [ValidateNotEmpty]
    public string FirstName { get; set; } = string.Empty;
    [ValidateNotEmpty]
    public string LastName { get; set; } = string.Empty;
    
    [Input(Type = &quot;file&quot;), UploadTo(&quot;profiles&quot;)]
    public string? ProfileUrl { get; set; }

    public int? SalaryExpectation { get; set; }
    [ValidateNotEmpty]
    public string JobType { get; set; } = string.Empty;
    public int AvailabilityWeeks { get; set; }
    public EmploymentType PreferredWorkType { get; set; }
    [ValidateNotEmpty]
    public string PreferredLocation { get; set; } = string.Empty;
    [ValidateNotEmpty]
    public string Email { get; set; } = string.Empty;
    public string? Phone { get; set; }
}

public class UpdateContact : IPatchDb&lt;Contact&gt;, IReturn&lt;Contact&gt;
{
    public int Id { get; set; }
    [ValidateNotEmpty]
    public string? FirstName { get; set; }
    [ValidateNotEmpty]
    public string? LastName { get; set; }

    [Input(Type = &quot;file&quot;), UploadTo(&quot;profiles&quot;)]
    public string? ProfileUrl { get; set; }
    
    public int? SalaryExpectation { get; set; }
    [ValidateNotEmpty]
    public string? JobType { get; set; }
    public int? AvailabilityWeeks { get; set; }
    public EmploymentType? PreferredWorkType { get; set; }
    public string? PreferredLocation { get; set; }
    [ValidateNotEmpty]
    public string? Email { get; set; }
    public string? Phone { get; set; }
    [Input(Type = &quot;textarea&quot;), FieldCss(Field = &quot;col-span-12 text-center&quot;)]
    public string? About { get; set; }
}
</code></pre>
<p>Only the <code>[UploadTo(location)]</code> attribute is required to instruct the API to use the specified Upload Location to
handle the File Upload. For successful uploads the Uploaded HTTP File will be saved to the configured file path which
it populates on the <code>ProfileUrl</code> property which from that point is treated as a normal <code>string</code> property that is
validated and stored along with the rest of the DTO properties in the <code>Contact</code> Table.</p>
<h3 id="auto-form-uis">Auto Form UIs<a class="header-anchor" href="javascript:;" onclick="location.hash='#auto-form-uis'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>In API Explorer &amp; Locode Apps you'll want to pair this together with <code>[Input(Type=&quot;file&quot;)]</code> to instruct the Auto Form UI
to use its File Upload control to handle updating this property, which looks like:</p>
<p><a href="https://talent.locode.dev/locode/QueryContacts?edit=1"><img src="/img/pages/locode/talent/update-contact.png" alt="" /></a></p>
<h2 id="managed-multi-file-upload-example">Managed Multi File Upload example<a class="header-anchor" href="javascript:;" onclick="location.hash='#managed-multi-file-upload-example'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>In addition to managing image profiles for its Users and Contacts, Talent Blazor also uses Managed File Uploads to
handle accepting an Applicant's Job Application attachments. A more
<a href="https://github.com/NetCoreApps/FileBlazor/blob/main/FileBlazor/Configure.AppHost.cs">advanced configuration</a>
is needed for this use-case, that:</p>
<ul>
<li>Saves uploaded Applications to the non-servable <strong>~/App_Data</strong> folder</li>
<li>Limits Job Applications to a maximum of <strong>3 attachments</strong></li>
<li>Limits Max Upload size to <strong>10mb</strong></li>
<li>Allows <strong>non-authenticated Users</strong> to upload &amp; download their attachments</li>
</ul>
<pre><code class="language-csharp">.ConfigureServices((context, services) =&gt;
{
    // Configure ASP.NET Core IOC Dependencies
    var appDataVfs = new FileSystemVirtualFiles(context.HostingEnvironment.ContentRootPath.CombineWith(&quot;App_Data&quot;).AssertDir());
    services.AddPlugin(new FilesUploadFeature(
        //...
        new UploadLocation(&quot;applications&quot;, appDataVfs, maxFileCount: 3, maxFileBytes: 10_000_000,
            resolvePath: ctx =&gt; ctx.GetLocationPath((ctx.Dto is CreateJobApplication create
                    ? $&quot;jobapp/{create.JobId}/{create.ContactId}/{ctx.FileName}&quot;
                    : $&quot;app/{ctx.Dto.GetId()}&quot;) + $&quot;/{ctx.DateSegment}/{ctx.FileName}&quot;),
            readAccessRole: RoleNames.AllowAnon, writeAccessRole: RoleNames.AllowAnon)
    ));
});
</code></pre>
<p>In this case instead of resolving a relative path from <code>/wwwroot</code> it uses <code>ctx.GetLocationPath()</code> to resolve to a managed
file location whose access is managed by  <code>FilesUploadFeature</code> File Management APIs:</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Route</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>StoreFileUpload</code></td>
<td><strong>POST</strong> <code>/uploads/{Name}</code></td>
<td>Upload files to the specified managed location</td>
</tr>
<tr>
<td><code>GetFileUpload</code></td>
<td><strong>GET</strong> <code>/uploads/{Name}/{Path}</code></td>
<td>Download file from the specified managed location</td>
</tr>
<tr>
<td><code>ReplaceFileUpload</code></td>
<td><strong>PUT</strong> <code>/uploads/{Name}/{Path}</code></td>
<td>Overwrite file at the specified managed location</td>
</tr>
<tr>
<td><code>DeleteFileUpload</code></td>
<td><strong>DELETE</strong> <code>/uploads/{Name}/{Path}</code></td>
<td>Delete file at the specified managed location</td>
</tr>
</tbody>
</table>
<div class="tip custom-block">
            <p class="custom-block-title">TIP</p><p><code>/uploads</code> is the default overridable <code>BasePath</code> for <code>FilesUploadFeature</code> managed File APIs</p>
</div>
<p>We can now start accepting attachments with our Job Applications by adding <code>[Input(Type=&quot;file&quot;), UploadTo(&quot;applications&quot;)]</code>
to the property where we want the Uploaded File metadata populated, when submitting and updating Job Applications:</p>
<pre><code class="language-csharp">public class CreateJobApplication : ICreateDb&lt;JobApplication&gt;, IReturn&lt;JobApplication&gt;
{
    [ValidateGreaterThan(0)]
    public int JobId { get; set; }
    [ValidateGreaterThan(0)]
    public int ContactId { get; set; }
    public DateTime AppliedDate { get; set; }
    public JobApplicationStatus ApplicationStatus { get; set; }
    [Input(Type=&quot;file&quot;), UploadTo(&quot;applications&quot;)]
    public List&lt;JobApplicationAttachment&gt; Attachments { get; set; }
}

public class UpdateJobApplication : IPatchDb&lt;JobApplication&gt;, IReturn&lt;JobApplication&gt;
{
    public int Id { get; set; }
    public int? JobId { get; set; }
    public int? ContactId { get; set; }
    public DateTime? AppliedDate { get; set; }
    public JobApplicationStatus ApplicationStatus { get; set; }
    [Input(Type=&quot;file&quot;), UploadTo(&quot;applications&quot;)]
    public List&lt;JobApplicationAttachment&gt;? Attachments { get; set; }
}
</code></pre>
<p>This is all that's needed to configure our CRUD Services to handle multiple file uploads in Locode &amp; API Explorer:</p>
<p><img src="/img/pages/locode/talent/create-job-application.png" alt="" /></p>
<p>Where the File Input behaves as just another Input control with contextual validation errors displayed when it exceeds
any of the configured file restrictions on its Upload Location, e.g:</p>
<p><img src="/img/pages/locode/talent/create-job-application-failed.png" alt="" /></p>
<p>After a successful submission the attachments are uploaded to the configured managed location path which is then used to
access the file in the Update Job Application Form UI:</p>
<p><img src="/img/pages/locode/talent/update-job-application.png" alt="" /></p>
<h3 id="integrates-with-autoquery-crud">Integrates with AutoQuery CRUD<a class="header-anchor" href="javascript:;" onclick="location.hash='#integrates-with-autoquery-crud'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>This is another example of how well this generic feature works with the rest of ServiceStack, where without any
implementation logic the AutoQuery CRUD API is able to populate a <strong>1 to Many</strong> table relationship to capture the metadata
of each uploaded file because the <code>Attachments</code> Request DTO property maps to a <code>[Reference]</code>
<a href="/ormlite/reference-support">POCO Reference</a> property which automatically populates
Foreign Key Reference properties in CRUD APIs.</p>
<pre><code class="language-csharp">public class JobApplication : AuditBase
{
    [Reference]
    public List&lt;JobApplicationAttachment&gt; Attachments { get; set; }
    //...
}

public class JobApplicationAttachment
{
    [AutoIncrement]
    public int Id { get; set; }

    [References(typeof(JobApplication))]
    public int JobApplicationId { get; set; }

    public string FileName { get; set; }
    [Format(FormatMethods.Attachment)]
    public string FilePath { get; set; }
    public string ContentType { get; set; }
    [Format(FormatMethods.Bytes)]
    public long ContentLength { get; set; }
}
</code></pre>
<h3 id="uploaded-file-metadata-populated-in-complex-type-properties">Uploaded File Metadata populated in Complex Type properties<a class="header-anchor" href="javascript:;" onclick="location.hash='#uploaded-file-metadata-populated-in-complex-type-properties'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>This also shows that <code>[UploadTo]</code> can either be applied to a <code>string</code> property where it's just populated with the
path the file is uploaded to, or it could contain a <strong>complex type</strong> where any matching properties are populated with
metadata of the uploaded file:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>FilePath</td>
<td>The UploadLocation path where the file is uploaded to</td>
</tr>
<tr>
<td>Name</td>
<td>The form field name from the Content-Disposition header</td>
</tr>
<tr>
<td>FileName</td>
<td>The file name of the uploaded file</td>
</tr>
<tr>
<td>ContentLength</td>
<td>The size in bytes of the uploaded file</td>
</tr>
<tr>
<td>ContentType</td>
<td>The Content-Type of the uploaded file</td>
</tr>
</tbody>
</table>
<p>In addition, it also supports <code>List&lt;string&gt;</code> or <code>List&lt;T&gt;</code> complex types for handling <strong>multiple file uploads</strong>, as done in this case.</p>
<p>All these features work together to achieve our desired result of populating submitted applications in the
<code>JobApplicationAttachment</code> joined table, so their metadata can be browsed, queried and navigated like any other
related data without file system access and without their contents consuming RDBMS resources:</p>
<p><img src="/img/pages/locode/talent/job-application-attachments.png" alt="" /></p>
<h2 id="uploading-files-from-c">Uploading Files from C#<a class="header-anchor" href="javascript:;" onclick="location.hash='#uploading-files-from-c'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>We can see how Locode gives us instant utility and lets us start submitting file attachments with any AutoQuery CRUD DTO,
but as the feature just uses the standard <a href="https://www.ietf.org/rfc/rfc2388.txt">HTTP multipart/form-data</a> Content-Type, we can use the
existing <a href="/csharp-client">Service Client APIs</a> for uploading files as demonstrated in Talent Blazor's
<a href="https://github.com/NetCoreApps/TalentBlazor/blob/main/TalentBlazor.Tests/FileUploadTests.cs">FileUploadTests.cs</a>
which uploads a single attachment when creating a Contact with a Profile Image and multiple file attachments when
submitting a Job Application:</p>
<pre><code class="language-csharp">var profileImg = await ProfileImageUrl.GetStreamFromUrlAsync();
var contact = await client.PostFileWithRequestAsync&lt;Contact&gt;(profileImg, &quot;cody-fisher.png&quot;, 
    new CreateContact
    {
        FirstName = &quot;Cody&quot;,
        LastName = &quot;Fisher&quot;,
        Email = &quot;cody.fisher@gmail.com&quot;,
        JobType = &quot;Security&quot;,
        PreferredLocation = &quot;Remote&quot;,
        PreferredWorkType = EmploymentType.FullTime,
        AvailabilityWeeks = 1,
        SalaryExpectation = 100_000,
        About = &quot;Lead Security Associate&quot;,
    }, fieldName:nameof(CreateContact.ProfileUrl));

// contact.ProfileUrl = /profiles/cody-fisher.png

var uploadedImage = await client.BaseUri.CombineWith(contact.ProfileUrl).GetStreamFromUrlAsync();
var coverLetter = new FileInfo($&quot;{AppData}/sample_coverletter.pdf&quot;);
var resume = new FileInfo($&quot;{AppData}/sample_resume.pdf&quot;);

var attachmentsField = nameof(CreateJobApplication.Attachments);
var uploadAttachments = new UploadFile[] {
    new(coverLetter.Name, coverLetter.OpenRead(), attachmentsField),
    new(resume.Name, coverLetter.OpenRead(), attachmentsField),
    new(contact.ProfileUrl.LastRightPart('/'), uploadedImage, attachmentsField),
};

var jobApp = await client.PostFilesWithRequestAsync&lt;JobApplication&gt;(new CreateJobApplication {
        JobId = 1,
        AppliedDate = DateTime.UtcNow,
        ContactId = contact.Id,
    }, uploadAttachments);

uploadAttachments.Each(x =&gt; x.Stream.Dispose());
</code></pre>
<p>This example also shows APIs are able to submit files from any <code>Stream</code> that can be sourced from anywhere,
including the HTTP Response stream of a Remote URI or files from a local hard drive.</p>
<h3 id="using-httpclient-multipartformdatacontent">Using HttpClient MultipartFormDataContent<a class="header-anchor" href="javascript:;" onclick="location.hash='#using-httpclient-multipartformdatacontent'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>The introduction of <a href="/csharp-client#jsonapiclient">.NET 6+ JsonApiClient</a> lets us provide an even more flexible approach by utilizing
<code>MultipartFormDataContent()</code> which we've enhanced with high-level extension methods to enable a Fluent API for constructing
custom API Requests populated from multiple sources, which can be sent using its <code>ApiForm*</code> methods:</p>
<pre><code class="language-csharp">var profileImg = await ProfileImageUrl.GetStreamFromUrlAsync();
using var createContact = new MultipartFormDataContent()
    .AddParams(new CreateContact
    {
        FirstName = &quot;Cody&quot;,
        LastName = &quot;Fisher&quot;,
        Email = &quot;cody.fisher@gmail.com&quot;,
        JobType = &quot;Security&quot;,
        PreferredLocation = &quot;Remote&quot;,
        PreferredWorkType = EmploymentType.FullTime,
        AvailabilityWeeks = 1,
        SalaryExpectation = 100_000,
        About = &quot;Lead Security Associate&quot;,
    })
    .AddFile(nameof(CreateContact.ProfileUrl), &quot;cody-fisher.png&quot;, profileImg);

var contactApi = await client.ApiFormAsync&lt;Contact&gt;(typeof(CreateContact).ToApiUrl(), createContact);
// contactApi.Succeeded = true
var contact = contactApi.Response!;
// contact.ProfileUrl   = /profiles/cody-fisher.png

using var uploadedImage = await client.BaseUri.CombineWith(contact.ProfileUrl).GetStreamFromUrlAsync();
var coverLetter = new FileInfo($&quot;{AppData}/sample_coverletter.pdf&quot;);
var resume = new FileInfo($&quot;{AppData}/sample_resume.pdf&quot;);

var attachmentsField = nameof(CreateJobApplication.Attachments);
var createJobApp = new MultipartFormDataContent()
    .AddParams(new CreateJobApplication {
        JobId = 1,
        AppliedDate = DateTime.UtcNow,
        ContactId = contact.Id,
    })
    .AddFile(attachmentsField, coverLetter)
    .AddFile(attachmentsField, resume)
    .AddFile(attachmentsField, contact.ProfileUrl.LastRightPart('/'), uploadedImage);

var jobAppApi = await client.ApiFormAsync&lt;JobApplication&gt;(
    typeof(CreateJobApplication).ToApiUrl(), createJobApp);
// jobAppApi.Succeeded = true
var jobApp = jobAppApi.Response!;
</code></pre>
<div class="tip custom-block">
            <p class="custom-block-title">TIP</p><p>All <code>JsonApiClient</code> Async APIs also have
<a href="/csharp-client#safe-sync-httpclient-apis">safe sync equivalents</a> when access outside an async method is needed</p>
</div>
<h3 id="versatile-multi-part-content-type-apis">Versatile Multi Part Content Type APIs<a class="header-anchor" href="javascript:;" onclick="location.hash='#versatile-multi-part-content-type-apis'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p><a href="https://github.com/ServiceStack/ServiceStack/blob/main/ServiceStack/tests/ServiceStack.WebHost.Endpoints.Tests/AutoQueryCrudTests.References.cs">AutoQueryCrudTests.References.cs</a>
also showcases how we can take advantage of <code>MultipartFormDataContent</code> to construct custom requests using a combination
of different Content Type sources, including single and multiple file attachments within a single request:</p>
<pre><code class="language-csharp">public class MultipartRequest : IPost, IReturn&lt;MultipartRequest&gt;
{
    public int Id { get; set; }
    public string String { get; set; }
    
    // Complex types sent as JSV by default
    public Contact Contact { get; set; }
    
    [MultiPartField(MimeTypes.Json)]
    public PhoneScreen PhoneScreen { get; set; }
    
    [MultiPartField(MimeTypes.Csv)]
    public List&lt;Contact&gt; Contacts { get; set; }
    
    [UploadTo(&quot;profiles&quot;)]
    public string ProfileUrl { get; set; }
    
    [UploadTo(&quot;applications&quot;)]
    public List&lt;UploadedFile&gt; UploadedFiles { get; set; } 
}
</code></pre>
<p><a href="/serialization-deserialization">Complex types are sent using JSV</a> by default which is a
more human &amp; wrist-friendly and more efficient format than JSON, however we could also take advantage of the flexibility
in HTTP <strong>multipart/form-data</strong> requests to construct an HTTP API Request utilizing multiple Content-Type's optimized
for the data we're sending, e.g:</p>
<ul>
<li>JSON/JSV more optimal for hierarchical graph data</li>
<li>CSV more optimal for sending tabular data</li>
<li>File Uploads are more optimal for sending large files</li>
</ul>
<p>To facilitate this in our Server APIs we can use <code>[MultiPartField]</code> attribute to instruct ServiceStack which registered
serializer it should use to deserialize the form-data payload, whilst we can continue using the generic <code>[UploadTo]</code>
attribute in normal APIs to handle our File Uploads and populate the Request DTO with the uploaded file metadata.</p>
<p>Our <code>MultipartFormDataContent</code> extension methods simplifies our client logic by allowing us to easily populate this
custom request in a single Fluent construction expression:</p>
<pre><code class="language-csharp">using var content = new MultipartFormDataContent()
    .AddParam(nameof(MultipartRequest.Id), 1)
    .AddParam(nameof(MultipartRequest.String), &quot;foo&quot;)
    .AddParam(nameof(MultipartRequest.Contact), 
        new Contact { Id = 1, FirstName = &quot;First&quot;, LastName = &quot;Last&quot; })
    .AddJsonParam(nameof(MultipartRequest.PhoneScreen), 
        new PhoneScreen { Id = 3, JobApplicationId = 1, Notes = &quot;The Notes&quot;})
    .AddCsvParam(nameof(MultipartRequest.Contacts), new[] {
        new Contact { Id = 2, FirstName = &quot;First2&quot;, LastName = &quot;Last2&quot; },
        new Contact { Id = 3, FirstName = &quot;First3&quot;, LastName = &quot;Last3&quot; },
    })
    .AddFile(nameof(MultipartRequest.ProfileUrl), &quot;profile.txt&quot;, file1Stream)
    .AddFile(nameof(MultipartRequest.UploadedFiles), &quot;uploadedFiles1.txt&quot;, file2Stream)
    .AddFile(nameof(MultipartRequest.UploadedFiles), &quot;uploadedFiles2.txt&quot;, file3Stream));

var api = await client.ApiFormAsync&lt;MultipartRequest&gt;(typeof(MultipartRequest).ToApiUrl(), content);
if (!api.Succeeded) api.Error.PrintDump();
</code></pre>
<h2 id="uploading-files-from-jstypescript">Uploading Files from JS/TypeScript<a class="header-anchor" href="javascript:;" onclick="location.hash='#uploading-files-from-jstypescript'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>Similarly, we can populate custom requests by either programmatically constructing the
<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData">FormData</a> object, which also benefits from native integration
in browsers where it can be populated directly from an HTML Form:</p>
<pre><code class="language-ts">let client = new JsonServiceClient(BaseUrl)
let formData = new FormData(document.forms[0])
let api = await client.apiForm(new MultipartRequest(), formData)
</code></pre>
<p>Where <code>apiForm</code> can be used to submit <code>FormData</code> requests for normal API Requests, or <code>apiFormVoid</code> for <code>IReturnVoid</code> API requests.</p>
<h2 id="substitutable-virtual-file-providers">Substitutable Virtual File Providers<a class="header-anchor" href="javascript:;" onclick="location.hash='#substitutable-virtual-file-providers'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>We've also created the <a href="https://github.com/NetCoreApps/FileBlazor">File Blazor Demo</a> to further demonstrate the versatility of the
<code>FilesUploadFeature</code> to seamlessly manage uploading files to multiple different locations using different
Virtual Files providers that's still able to utilize the same custom configuration and validation in its
<a href="https://github.com/NetCoreApps/FileBlazor/blob/main/FileBlazor/Configure.AppHost.cs">Configure.AppHost.cs</a>:</p>
<pre><code class="language-csharp">.ConfigureServices((context, services) =&gt;
{
    // Configure ASP.NET Core IOC Dependencies
    //...
    var awsAccessKeyId = Environment.GetEnvironmentVariable(&quot;AWS_ACCESS_KEY_ID&quot;) ??
                         Environment.GetEnvironmentVariable(&quot;LOCAL_AWS_ACCESS_KEY_ID&quot;);
    var awsSecretAccessKey = Environment.GetEnvironmentVariable(&quot;AWS_SECRET_ACCESS_KEY&quot;) ??
                             Environment.GetEnvironmentVariable(&quot;LOCAL_AWS_SECRET_ACCESS_KEY&quot;);
    var azureBlobConnString = Environment.GetEnvironmentVariable(&quot;AZURE_BLOB_CONNECTION_STRING&quot;) ??
                              Environment.GetEnvironmentVariable(&quot;LOCAL_AZURE_BLOB_CONNECTION_STRING&quot;);

    var appFs = new FileSystemVirtualFiles(context.HostingEnvironment.ContentRootPath.CombineWith(&quot;App_Data&quot;).AssertDir());
    var s3Client = new AmazonS3Client(awsAccessKeyId, awsSecretAccessKey, RegionEndpoint.USEast1);
    var s3DataVfs = new S3VirtualFiles(s3Client, &quot;file-blazor-demo&quot;);

    if(string.IsNullOrEmpty(azureBlobConnString))
        Log.Warn(&quot;Started without Azure Blob Storage configured.&quot;);
    
    var uploadLocations = new[] {
        new UploadLocation(&quot;s3&quot;, s3DataVfs,
            readAccessRole: RoleNames.AllowAnon, resolvePath: ResolveUploadPath,
            validateUpload: ValidateUpload, validateDownload: ValidateDownload,
            maxFileBytes: 10 * 1024 * 1024),
        new UploadLocation(&quot;fs&quot;, appFs,
            readAccessRole: RoleNames.AllowAnon, resolvePath: ResolveUploadPath,
            validateUpload: ValidateUpload, validateDownload: ValidateDownload,
            maxFileBytes: 10 * 1024 * 1024),
        // User profiles
        new UploadLocation(&quot;users&quot;, appFs, allowExtensions: FileExt.WebImages,
            resolvePath: ctx =&gt; $&quot;/profiles/users/{ctx.UserAuthId}.{ctx.FileExtension}&quot;,
            maxFileBytes: 10 * 1024 * 1024)
    };

    if (!string.IsNullOrEmpty(azureBlobConnString))
    {
        var azureBlobVfs = new AzureBlobVirtualFiles(azureBlobConnString, &quot;fileblazordemo&quot;);
        uploadLocations = uploadLocations.Prepend(new UploadLocation(&quot;azure&quot;, azureBlobVfs,
            readAccessRole: RoleNames.AllowAnon, resolvePath: ResolveUploadPath,
            validateUpload: ValidateUpload, validateDownload: ValidateDownload,
            maxFileBytes: 10 * 1024 * 1024)).ToArray();
    }
    
    var uploadPlugin = new FilesUploadFeature(uploadLocations);
    services.AddPlugin(uploadPlugin);
});
//...
private static string ResolveUploadPath(FilesUploadContext ctx)
{
    if (ctx.Dto is IFileItemRequest { FileAccessType: { } } createFile)
    {
        return createFile.FileAccessType != FileAccessType.Private
            ? ctx.GetLocationPath($&quot;/{createFile.FileAccessType}/{ctx.FileName}&quot;)
            : ctx.GetLocationPath($&quot;/{createFile.FileAccessType}/{ctx.UserAuthId}/{ctx.FileName}&quot;);
    }
    throw HttpError.BadRequest(&quot;Invalid file creation request.&quot;);
}

private static void ValidateUpload(IRequest request, IHttpFile file)
{
    if (request.Dto is IFileItemRequest createFile)
    {
        var accessType = createFile.FileAccessType;
        var ext = file.FileName.LastRightPart('.');
        if (accessType == FileAccessType.Team &amp;&amp; ext != null &amp;&amp; FileExt.WebImages.Contains(ext) == false)
            throw new ArgumentException(&quot;Supported file extensions: {0}&quot;.LocalizeFmt(request,
                string.Join(&quot;, &quot;, FileExt.WebImages.Map(x =&gt; '.' + x).OrderBy(x =&gt; x))), file.FileName);
    }
    else
        throw new HttpError(&quot;Invalid request.&quot;);
}
//...
</code></pre>
<h3 id="memory-virtual-file-sources">Memory Virtual File Sources<a class="header-anchor" href="javascript:;" onclick="location.hash='#memory-virtual-file-sources'" aria-label="Permalink">&ZeroWidthSpace;</a></h3>
<p>ServiceStack AppHost's are configured with an empty Memory VFS which can be used to transiently prepopulate App files
from external sources on Startup or maintain temporary working files with the same lifetime of the App without needing
to persist to disk.</p>
<p>They're also a great solution for Integration Testing managed file access without creating any persistent artifacts as done in
<a href="https://github.com/ServiceStack/ServiceStack/blob/main/ServiceStack/tests/ServiceStack.WebHost.Endpoints.Tests/AutoQueryCrudTests.References.cs">AutoQueryCrudTests.References.cs</a></p>
<pre><code class="language-csharp">var memFs = new MemoryVirtualFiles();
services.AddPlugin(new FilesUploadFeature(
    new UploadLocation(&quot;profiles&quot;, memFs),
    new UploadLocation(&quot;applications&quot;, memFs, maxFileCount: 3, maxFileBytes: 10_000_000,
        resolvePath: ctx =&gt; ctx.GetLocationPath((ctx.Dto is CreateJobApplication create
            ? $&quot;job/{create.JobId}&quot;
            : $&quot;app/{ctx.Dto.GetId()}&quot;) + $&quot;/{ctx.DateSegment}/{ctx.FileName}&quot;),
        readAccessRole:RoleNames.AllowAnon, writeAccessRole:RoleNames.AllowAnon)
));
</code></pre>
<h2 id="configuring-database-first-apps">Configuring Database-First Apps<a class="header-anchor" href="javascript:;" onclick="location.hash='#configuring-database-first-apps'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p>As <a href="/locode/database-first">Database-First Types</a> are only generated &amp; exist at runtime they can't be explicitly annotated
with <code>[UploadTo]</code> attributes, instead they can be added dynamically at runtime by using AutoQuery's  <code>TypeFilter</code> which
is invoked for all Types including Request and Response DTO types.</p>
<p>An <a href="https://github.com/NetCoreApps/NorthwindAuto/blob/master/Configure.AppHost.cs">example of this</a> can be found in the
<code>Northwind</code> Locode Database-First demo which uses <code>type.Name == &quot;Employee&quot;</code> to match on the <code>Employee</code> Data Model and
<code>IsCrudCreateOrUpdate(&quot;Employee&quot;)</code> Metadata Type extension method to target its <code>CreateEmployee</code> and <code>UpdateEmployee</code> CRUD APIs:</p>
<pre><code class="language-csharp">TypeFilter = (type, req) =&gt;
{
    if (type.Name == &quot;Employee&quot;)
    {
        // Remove embedded Blob column from Data Model Type 
        type.Properties.RemoveAll(x =&gt; x.Name == &quot;Photo&quot;);
    }
    if (type.IsCrudCreateOrUpdate(&quot;Employee&quot;))
    {
        // Add `[Input]` and `[UploadTo]` attributes to `PhotoPath` managed file upload property
        type.Property(&quot;PhotoPath&quot;)
            .AddAttribute(new InputAttribute { Type = Input.Types.File })
            .AddAttribute(new UploadToAttribute(&quot;employees&quot;));
    }
    //...
}
</code></pre>
<p>The result of this is converting the Northwind Database from using the <code>Photo</code> blob column to persist image bit maps
and instead uses the <code>PhotoPath</code> column to maintain an external file reference to their Profile Photo which is
managed by the <code>FilesUploadFeature</code> to persist images to its configured <code>FileSystemVirtualFiles</code> virtual file source.</p>
<h2 id="files-upload-transformer">Files Upload Transformer<a class="header-anchor" href="javascript:;" onclick="location.hash='#files-upload-transformer'" aria-label="Permalink">&ZeroWidthSpace;</a></h2>
<p><a href="/blazor-diffusion">Blazor Diffusion</a> uses the Managed Files Upload Feature configured in <a href="https://github.com/NetCoreApps/BlazorDiffusion/blob/main/BlazorDiffusion/Configure.AppHost.cs">Configure.AppHost.cs</a> for all its website File Uploads:</p>
<pre><code class="language-csharp">var r2Client = new AmazonS3Client(appConfig.R2AccessId, appConfig.R2AccessKey, new AmazonS3Config
{
    ServiceURL = $&quot;https://{appConfig.R2Account}.r2.cloudflarestorage.com&quot;
});
services.AddSingleton(r2Client);
var localFs = new FileSystemVirtualFiles(context.HostingEnvironment.ContentRootPath.CombineWith(&quot;App_Files&quot;).AssertDir());
var appFs = VirtualFiles = hasR2 ? new R2VirtualFiles(r2Client, appConfig.ArtifactBucket) : localFs;
services.AddPlugin(new FilesUploadFeature(
    new UploadLocation(&quot;artifacts&quot;, appFs,
        readAccessRole: RoleNames.AllowAnon,
        maxFileBytes: AppData.MaxArtifactSize),
    new UploadLocation(&quot;avatars&quot;, appFs, allowExtensions: FileExt.WebImages,
        // Use unique URL to invalidate CDN caches
        resolvePath: ctx =&gt; X.Map((CustomUserSession)ctx.Session,
            x =&gt; $&quot;/avatars/{x.RefIdStr[..2]}/{x.RefIdStr}/{ctx.FileName}&quot;)!,
        maxFileBytes: AppData.MaxAvatarSize,
        transformFile: ImageUtils.TransformAvatarAsync)
));
</code></pre>
<p>It utilizes the new <strong>transformFile:</strong> option to transform an uploaded file and save a reference to the transformed file instead. This is used to only save a reference to the <strong>128x128</strong> resized avatar used by the App, whilst still persisting the original uploaded image in a <a href="/background-mq">Background MQ</a> task in case a higher resolution of their avatar is needed later.</p>
<pre><code class="language-csharp">public class ImageDetails
{
    public static async Task&lt;IHttpFile?&gt; TransformAvatarAsync(FilesUploadContext ctx)
    {
        var originalMs = await ctx.File.InputStream.CopyToNewMemoryStreamAsync();

        // Offload persistance of original image to background task
        using var mqClient = HostContext.AppHost.GetMessageProducer(ctx.Request);
        mqClient.Publish(new DiskTasks {
            SaveFile = new() {
                FilePath = ctx.Location.ResolvePath(ctx),
                Stream = originalMs,
            }
        });

        var resizedMs = await CropAndResizeAsync(originalMs, 128, 128, PngFormat.Instance);

        return new HttpFile(ctx.File)
        {
            FileName = $&quot;{ctx.FileName.LastLeftPart('.')}_128.{ctx.File.FileName.LastRightPart('.')}&quot;,
            ContentLength = resizedMs.Length,
            InputStream = resizedMs,
        };
    }

    public static async Task&lt;MemoryStream&gt; CropAndResizeAsync(Stream inStream, int width, int height, IImageFormat format)
    {
        var outStream = new MemoryStream();
        var image = await Image.LoadAsync(inStream);
        using (image)
        {
            var clone = image.Clone(context =&gt; context
                .Resize(new ResizeOptions {
                    Mode = ResizeMode.Crop,
                    Size = new Size(width, height),
                }));
            await clone.SaveAsync(outStream, format);
        }
        outStream.Position = 0;
        return outStream;
    }
}
</code></pre>
</div>

                <div class="not-prose"></div>
                
                    <div class="not-prose py-8">
                        <a class="text-slate-500 font-semibold hover:text-indigo-600 flex items-center" href="https://github.com/ServiceStack/docs.servicestack.net/blob/main/MyApp/_pages/locode/files-overview.md" target="_blank" rel="noopener noreferrer">
                            Edit this page on GitHub<svg class="ml-1 inline-block w-4 h-4" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" data-v-1ed99556=""><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg>
                        </a>
                    </div>

                    <div class="not-prose my-20">
                                <nav class="flex items-center justify-between border-t border-gray-200 dark:border-gray-700 px-4 sm:px-0">
                                    <div class="-mt-px flex w-0 flex-1">
                                            <a href="/locode/custom-components" class="inline-flex items-center border-t-2 border-transparent pt-4 pr-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                <!-- Heroicon name: mini/arrow-long-left -->
                                                <svg class="mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M18 10a.75.75 0 01-.75.75H4.66l2.1 1.95a.75.75 0 11-1.02 1.1l-3.5-3.25a.75.75 0 010-1.1l3.5-3.25a.75.75 0 111.02 1.1l-2.1 1.95h12.59A.75.75 0 0118 10z" clip-rule="evenodd"></path>
                                                </svg>
                                                Custom Components
                                            </a>
                                    </div>
                                    <div class="hidden md:-mt-px md:flex"></div>
                                    <div class="-mt-px flex w-0 flex-1 justify-end">
                                            <a href="/locode/files-blazor" class="inline-flex items-center border-t-2 border-transparent pt-4 pl-1 text-sm font-medium text-gray-500 hover:border-gray-300 dark:hover:border-gray-600 hover:text-gray-700 dark:hover:text-gray-200">
                                                File Blazor Demo
                                                <!-- Heroicon name: mini/arrow-long-right -->
                                                <svg class="ml-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                    <path fill-rule="evenodd" d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z" clip-rule="evenodd"></path>
                                                </svg>
                                            </a>
                                    </div>
                                </nav>
                    </div>
            </div>
                
                <div class="docmap hidden 2xl:block flex-none w-64 pl-8 mr-8">
                    <div class="fixed bg-white dark:bg-black flex flex-col overflow-y-auto pt-10 px-8 pb-6" style="height:calc(100vh - 50px);">
                        <div>
                            <h5 class="text-slate-900 font-semibold mb-4 text-sm leading-6 dark:text-slate-100">
                                On This Page
                            </h5>
                            <ul class="text-slate-700 text-sm leading-6">
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#basic-file-upload-example'" data-id="basic-file-upload-example" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Basic File Upload Example
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="using-file-upload-locations-in-apis" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#using-file-upload-locations-in-apis'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Using File Upload Locations in APIs
                                                        </span>
                                                    </li>
                                                    <li data-id="auto-form-uis" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#auto-form-uis'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Auto Form UIs
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#managed-multi-file-upload-example'" data-id="managed-multi-file-upload-example" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Managed Multi File Upload example
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="integrates-with-autoquery-crud" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#integrates-with-autoquery-crud'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Integrates with AutoQuery CRUD
                                                        </span>
                                                    </li>
                                                    <li data-id="uploaded-file-metadata-populated-in-complex-type-properties" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#uploaded-file-metadata-populated-in-complex-type-properties'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Uploaded File Metadata populated in Complex Type properties
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#uploading-files-from-c'" data-id="uploading-files-from-c" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Uploading Files from C#
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="using-httpclient-multipartformdatacontent" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#using-httpclient-multipartformdatacontent'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Using HttpClient MultipartFormDataContent
                                                        </span>
                                                    </li>
                                                    <li data-id="versatile-multi-part-content-type-apis" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#versatile-multi-part-content-type-apis'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Versatile Multi Part Content Type APIs
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#uploading-files-from-jstypescript'" data-id="uploading-files-from-jstypescript" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Uploading Files from JS/TypeScript
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#substitutable-virtual-file-providers'" data-id="substitutable-virtual-file-providers" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Substitutable Virtual File Providers
                                        </span>
                                            <ul class="ml-4">
                                                    <li data-id="memory-virtual-file-sources" class="text-gray-500 hover:text-gray-900">
                                                        <span v-hash="'#memory-virtual-file-sources'" class="cursor-pointer flex text-sm transform transition-colors duration-200 py-2">
                                                            <svg width="3" height="24" viewBox="0 -9 3 24" class="mr-2 overflow-visible"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>
                                                            Memory Virtual File Sources
                                                        </span>
                                                    </li>
                                            </ul>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#configuring-database-first-apps'" data-id="configuring-database-first-apps" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Configuring Database-First Apps
                                        </span>
                                    </li>
                                    <li class="group text-gray-800 hover:text-gray-900">
                                        <span v-hash="'#files-upload-transformer'" data-id="files-upload-transformer" class="cursor-pointer font-medium block text-sm transform transition-colors duration-200 py-2">
                                            Files Upload Transformer
                                        </span>
                                    </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
        </div>
    </div>    
</div>

<script>
//doc instructions
if (document.querySelector('.hide-title')) {
    const el = document.querySelector('#doc section h1') 
    if (el) el.style.display='none'
}
</script>

<script type="module">
import { ref } from "vue"
import { mount } from "app.mjs"


    const App = {
        setup() {
            function nav(url) {
                window.open(url)
            }
            return { nav }
        }
    }
    
const Sidebar = {
    setup() {
        const open = ref(true)
        return { open }
    }
}

mount('#doc', App)
mount('#sidebar', Sidebar)
</script>

<script src="/lib/js/highlight.js"></script>
<script>hljs.highlightAll()</script>
<script src="/lib/js/lite-yt-embed.js"></script>
<script src="/mjs/docs.mjs" type="module"></script>


    </main>
</div>

<script type="module">
import { init } from "app.mjs"
init()
</script>





</body>
</html>